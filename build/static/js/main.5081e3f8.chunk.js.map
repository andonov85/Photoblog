{"version":3,"sources":["Firebase.js","AlgoliaUpdateSearchIndex.js","components/blog/AdminTools.js","components/navbar/TopNavBar.js","components/navbar/NavLink.js","components/navbar/NavBar.js","components/navbar/DrawerMenu.js","components/gallery/imageSource.js","components/helperFunctions/makeCancelablePromise.js","components/main/MainTitle.js","components/main/Main.js","components/about/About.js","components/gallery/Gallery.js","components/gallery/Category.js","components/blog/uploadSource.js","components/blog/WriteComment.js","components/blog/SubComment.js","components/blog/Comment.js","components/blog/CommentSection.js","components/blog/Post.js","Algolia.js","components/blog/Blog.js","App.js","registerServiceWorker.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","firestore","settings","timestampsInSnapshots","client","algoliasearch","ALGOLIA_INDEX_NAME","AdminTools","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","open","title","content","avatarUrl","imageUrl","linkUrl","homepageUrl","date","Timestamp","now","commentsCounter","likes","handleAddPost","bind","assertThisInitialized","handleClickOpen","handleClose","setState","_this$state","post","collection","add","then","postRef","toDate","getTime","objectID","id","initIndex","addObject","err","console","log","AlgoliaUpdateSearchIndex","_this2","classes","react_default","a","createElement","className","root","Button_default","button","aria-label","onClick","Dialog_default","onClose","aria-labelledby","DialogTitle_default","DialogContent_default","TextField_default","autoFocus","margin","label","type","fullWidth","onChange","event","target","value","DialogActions_default","color","React","Component","withStyles","theme","spacing","unit","userName","display","TopNavBar","anchorEl","handleMenu","currentTarget","AppBar_default","position","appbar","Toolbar_default","Typography_default","variant","align","logo","UserContext","Consumer","user","role","adminTools","blog_AdminTools","children","compose","_logo","_adminTools","flexGrow","boxShadow","backgroundColor","borderBottom","defineProperty","breakpoints","down","textAlign","fontSize","marginLeft","withWidth","NavLink","_this$props","to","location","buttonName","Route","path","_ref","match","Link","replace","pathname","style","textDecoration","buttons","routerNavLink","withRouter","_buttons","border","borderRadius","NavBar","rootEl","createRef","barEl","initialPosition","isFixed","handleScroll","current","rootRect","getBoundingClientRect","hasFixedOpenClass","classList","contains","fixedOpen","bottom","top","window","addEventListener","removeEventListener","ref","classnames","fixed","toolbar","navbar_NavLink","height","width","opacity","zIndex","&:hover","transition","marginRight","minHeight","padding","DrawerMenu","toggleDrawer","side","fullList","List_default","Fragment","menuButton","Drawer_default","anchor","tabIndex","onKeyDown","flexDirection","justifyContent","alignItems","minWidth","imageSource","Promise","resolve","reject","images","get","snapshot","empty","forEach","doc","image","data","push","name","url","thumbUrl","category","description","makeCancelable","promise","hasCanceled_","val","isCanceled","error","cancel","MainTitle","fetchImages","makeCancelablePromise","showImage","loading","handleOnLoad","randomImage","Math","floor","random","length","catch","reason","Paper_default","paper","CircularProgress_default","Fade_default","in","timeout","enter","exit","backgroundImage","concat","src","alt","onLoad","_paper","Grid_default","container","justify","item","xs","main_MainTitle","index_es","Gallery","fetchImageCategories","exists","categories","categoriesData","checked","categoriesContainer","map","index","Grow_default","assign","key","toLowerCase","transformOrigin","links","_links","marginTop","marginBottom","Category","openModal","params","where","imagesData","_doc$data","imageName","handleOpen","e","dataset","prevProps","hasOwnProperty","setImageSource","_this3","gutterBottom","md","lg","gridItem","Card_default","card","about","CardMedia_default","media","data-url","Modal_default","aria-describedby","left","transform","imageContainer","paddingTop","fontFamily","textTransform","maxWidth","cardContent","boxSizing","maxHeight","uploadComment","comment","db","commentRef","postId","runTransaction","t","newCommentsCounter","update","result","WriteComment","commentField","publishComment","userId","googleId","_this$props2","CardHeader_default","header","avatar","Avatar_default","textField","multiline","rows","SubComment","subcomment","subheader","CardContent_default","component","Divider_default","Comment","commentsNumber","expanded","handleExpandClick","sendSubcomment","commentId","subcomments","CardActions_default","actions","disableActionSpacing","IconButton_default","expand","expandOpen","aria-expanded","ExpandMore_default","Collapse_default","unmountOnExit","filter","el","blog_SubComment","subcommentId","dense","paddingLeft","transitions","create","duration","shortest","up","CommentSection","comments","unsubscribeComments","orderBy","onSnapshot","_comment$data","toDateString","toLocaleTimeString","unsubscribeSubcomments","_subcomment$data","blog_Comment","Post","isLikeRecieved","isLikePending","isLiked","chat","changeLikeColor","handleCommentClick","addToLiked","unsubscribeBlog","unsubscribeUserLiked","userLike","docs","undefined","_this4","vote","newLikes","userLiked","liked","Date","bigAvatar","rel","href","Favorite_default","favourite","unfavourite","Comment_default","blog_CommentSection","blog_WriteComment","overflow","boxOrient","textOverflow","lineClamp","Algolia","query","search","hitsPerPage","Blog","AlgoliaResults","posts","handleOnSearchChange","handleOnContentVisible","searchValue","hits","searchBar","articleContainer","articlesTitle","grid","sm","LazyLoad_default","lazyLoad","offsetVertical","onContentVisible","blog_Post","_articlesTitle","_articleContainer","_posts","createContext","createMuiTheme","palette","primary","grey","App","responseGoogle","res","googleUser","email","familyName","givenName","users","userObj","setUser","profileObj","logout","core_styles","BrowserRouter","Provider","navbar_TopNavBar","google_login","GoogleLogout","tag","buttonText","onLogoutSuccess","GoogleLogin","clientId","uxMode","onSuccess","onFailure","isSignedIn","Hidden_default","only","navbar_NavBar","navbar_DrawerMenu","Switch","exact","Main","About","render","fontWeight","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","src_App","document","getElementById","URL","origin","fetch","response","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"kaAYAA,IAASC,cARI,CACXC,OAAQC,0CACRC,WAAYD,sCACZE,YAAaF,6CACbG,UAAWH,sBACXI,cAAeJ,kCACfK,kBAAmBL,iBAIHH,IAASS,YAEjBC,SADO,CAAEC,uBAAuB,gBCVpCC,QAASC,GAHIV,aACOA,oCAGpBW,EAAqB,uHCmBrBC,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,MAAM,EACNC,MAAO,GACPC,QAAS,GACTC,UAAW,GACXC,SAAU,GACVC,QAAS,GACTC,YAAa,GACbC,KAAMhC,IAASS,UAAUwB,UAAUC,MACnCC,gBAAiB,EACjBC,MAAO,GAETnB,EAAKoB,cAAgBpB,EAAKoB,cAAcC,KAAnBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KACrBA,EAAKuB,gBAAkBvB,EAAKuB,gBAAgBF,KAArBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KACvBA,EAAKwB,YAAcxB,EAAKwB,YAAYH,KAAjBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KAhBFA,iFAoBjBG,KAAKsB,SAAS,CAAEjB,MAAM,0CAItBL,KAAKsB,SAAS,CAAEjB,MAAM,4CAGR,IAAAkB,EAC+EvB,KAAKI,MAC9FoB,EAAO,CAAElB,MAFCiB,EACNjB,MACYC,QAFNgB,EACChB,QACcC,UAFfe,EACUf,UACgBC,SAF1Bc,EACqBd,SACeC,QAFpCa,EAC+Bb,QACcC,YAF7CY,EACwCZ,YACkBC,KAF1DW,EACqDX,KACWG,gBAFhEQ,EAC2DR,iBAG5DnC,IAASS,YAAYoC,WAAW,QACxCC,IAAIF,GAAMG,KAAK,SAACC,UACZJ,EAAKT,uBACLS,EAAKR,MACZQ,EAAKZ,KAAOY,EAAKZ,KAAKiB,SAASC,UAC/BN,EAAKO,SAAWH,EAAQI,GDrD9B,SAAkCR,GAElBhC,EAAOyC,UAAUvC,GAClBwC,UAAUV,EAAM,SAASW,EAAK5B,GACtC4B,GAAKC,QAAQC,IAAIF,GACrBC,QAAQC,IAAI9B,KCkDT+B,CAAyBd,KAG3BxB,KAAKsB,SAAS,CAAEjB,MAAM,qCAGf,IAAAkC,EAAAvC,KACCwC,EAAYxC,KAAKJ,MAAjB4C,QAER,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQK,MAItBJ,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CAAQE,UAAWJ,EAAQO,OAAQC,aAAW,WAAWC,QAASjD,KAAKoB,iBACrEqB,EAAAC,EAAAC,cAAA,KAAGC,UAAU,kBAAb,gBAIFH,EAAAC,EAAAC,cAACO,EAAAR,EAAD,CACErC,KAAML,KAAKI,MAAMC,KACjB8C,QAASnD,KAAKqB,YACd+B,kBAAgB,qBAEhBX,EAAAC,EAAAC,cAACU,EAAAX,EAAD,CAAaV,GAAG,qBAAhB,YACAS,EAAAC,EAAAC,cAACW,EAAAZ,EAAD,KACED,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEc,WAAS,EACTC,OAAO,QACPzB,GAAG,OACH0B,MAAM,QACNC,KAAK,SACLC,WAAS,EACTC,SAAU,SAAAC,GAAK,OAAIvB,EAAKjB,SAAS,CAAEhB,MAAOwD,EAAMC,OAAOC,WAEzDvB,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEe,OAAO,QACPzB,GAAG,OACH0B,MAAM,UACNC,KAAK,SACLC,WAAS,EACTC,SAAU,SAAAC,GAAK,OAAIvB,EAAKjB,SAAS,CAAEf,QAASuD,EAAMC,OAAOC,WAE3DvB,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEe,OAAO,QACPzB,GAAG,OACH0B,MAAM,YACNC,KAAK,MACLC,WAAS,EACTC,SAAU,SAAAC,GAAK,OAAIvB,EAAKjB,SAAS,CAAEd,UAAWsD,EAAMC,OAAOC,WAE7DvB,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEe,OAAO,QACPzB,GAAG,OACH0B,MAAM,WACNC,KAAK,MACLC,WAAS,EACTC,SAAU,SAAAC,GAAK,OAAIvB,EAAKjB,SAAS,CAAEb,SAAUqD,EAAMC,OAAOC,WAE5DvB,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEe,OAAO,QACPzB,GAAG,OACH0B,MAAM,UACNC,KAAK,MACLC,WAAS,EACTC,SAAU,SAAAC,GAAK,OAAIvB,EAAKjB,SAAS,CAAEZ,QAASoD,EAAMC,OAAOC,WAE3DvB,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEe,OAAO,QACPzB,GAAG,OACH0B,MAAM,cACNC,KAAK,MACLC,WAAS,EACTC,SAAU,SAAAC,GAAK,OAAIvB,EAAKjB,SAAS,CAAEX,YAAamD,EAAMC,OAAOC,YAGjEvB,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,KACED,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CAAQO,QAASjD,KAAKqB,YAAa6C,MAAM,WAAzC,UAGAzB,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CAAQO,QAASjD,KAAKiB,cAAeiD,MAAM,WAA3C,qBAvHaC,IAAMC,WAqIhBC,uBA/IA,SAAAC,GAAK,MAAK,CACvBvB,OAAQ,CACNU,OAAQa,EAAMC,QAAQC,KACtBN,MAAO,QAETO,SAAU,CACRC,QAAS,YAyIEL,CAAmB1E,yDCjH5BgF,8MACJvE,MAAQ,CACNwE,SAAU,QAGZC,WAAa,SAAAf,GACXjE,EAAKyB,SAAS,CAAEsD,SAAUd,EAAMgB,mBAGlCzD,YAAc,WACZxB,EAAKyB,SAAS,CAAEsD,SAAU,gFAGnB,IACCpC,EAAYxC,KAAKJ,MAAjB4C,QAIR,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQK,MACtBJ,EAAAC,EAAAC,cAACoC,EAAArC,EAAD,CAAQsC,SAAS,SAASpC,UAAWJ,EAAQyC,QAC3CxC,EAAAC,EAAAC,cAACuC,EAAAxC,EAAD,KACID,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,CAAY0C,QAAQ,WAAWC,MAAM,SAASzC,UAAWJ,EAAQ8C,MAAjE,kBAGA7C,EAAAC,EAAAC,cAAC4C,GAAYC,SAAb,KACG,SAAAC,GAAI,OAAIA,GAAsB,UAAdA,EAAKC,KAAmBjD,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQmD,YAAYlD,EAAAC,EAAAC,cAACiD,EAAD,OAAsB,OAEpG5F,KAAKJ,MAAMiG,mBA5BF1B,IAAMC,WAiEf0B,OACbzB,qBA7Fa,SAAAC,GAAK,IAAAyB,EAAAC,EAAA,MAAK,CACvBnD,KAAM,CACJoD,SAAU,GAEZhB,OAAQ,CACNiB,UAAW,OACXC,gBAAiB,QACjBC,aAAc,qBAEhBd,MAAIS,EAAA,GAAAjG,OAAAuG,EAAA,EAAAvG,CAAAiG,EACDzB,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BC,UAAW,OACXC,SAAU,KAHV3G,OAAAuG,EAAA,EAAAvG,CAAAiG,EAAA,WAKQ,GALRjG,OAAAuG,EAAA,EAAAvG,CAAAiG,EAAA,aAMU,0BANVjG,OAAAuG,EAAA,EAAAvG,CAAAiG,EAAA,QAOK,QAPLA,GASJJ,YAAUK,EAAA,GAAAlG,OAAAuG,EAAA,EAAAvG,CAAAkG,EACP1B,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BG,WAAY,UAFN5G,OAAAuG,EAAA,EAAAvG,CAAAkG,EAAA,WAIE,YAJFlG,OAAAuG,EAAA,EAAAvG,CAAAkG,EAAA,aAKI,OALJA,MA4EVW,MAFab,CAGbnB,2CCrFIiC,oLACK,IAAAC,EACuC7G,KAAKJ,MAA3C4C,EADDqE,EACCrE,QAASsE,EADVD,EACUC,GAAIC,EADdF,EACcE,SAAUC,EADxBH,EACwBG,WAC/B,OACEvE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOC,KAAMJ,EAAIjB,SAAU,SAAAsB,GAAA,IAAGC,EAAHD,EAAGC,MAAH,OACzB3E,EAAAC,EAAAC,cAAC0E,GAAA,EAAD,CAAM1D,KAAK,SAAS2D,QAASF,IAAUL,EAASQ,SAAUT,GAAIA,EAAIU,MAAO,CAACC,eAAgB,SACxFhF,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CAAQE,UAAWJ,EAAQkF,SAAUV,cANzB7C,IAAMC,WAgBtBuD,GAAgBC,aAAWhB,IAElBvC,wBAvCA,SAAAC,GAAK,IAAAuD,EAAA,MAAK,CACvBH,SAAOG,EAAA,GAAA/H,OAAAuG,EAAA,EAAAvG,CAAA+H,EACJvD,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BrC,MAAO,UAFJpE,OAAAuG,EAAA,EAAAvG,CAAA+H,EAIL,UAAW,CACT1B,gBAAiB,QACjB2B,OAAQ,oBACRC,aAAc,OACd7D,MAAO,UARJpE,OAAAuG,EAAA,EAAAvG,CAAA+H,EAAA,UAUI,GAVJ/H,OAAAuG,EAAA,EAAAvG,CAAA+H,EAAA,WAWK,IAXL/H,OAAAuG,EAAA,EAAAvG,CAAA+H,EAAA,gBAYU,QAZV/H,OAAAuG,EAAA,EAAAvG,CAAA+H,EAAA,aAaO,SAbP/H,OAAAuG,EAAA,EAAAvG,CAAA+H,EAAA,WAcK,IAdL/H,OAAAuG,EAAA,EAAAvG,CAAA+H,EAAA,aAeO,qBAfP/H,OAAAuG,EAAA,EAAAvG,CAAA+H,EAAA,eAgBS,GAhBTA,KAsCMxD,CAAmBsD,ICF5BK,eACJ,SAAAA,EAAYpI,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAgI,IACjBnI,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAkI,GAAA7H,KAAAH,KAAMJ,KACDqI,OAAS9D,IAAM+D,YACpBrI,EAAKsI,MAAQhE,IAAM+D,YACnBrI,EAAKuI,gBAAkB,GAEvBvI,EAAKO,MAAQ,CACXiI,SAAS,GAEXxI,EAAKyI,aAAezI,EAAKyI,aAAapH,KAAlBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KATHA,8EAajB,IAAMoI,EAASjI,KAAKiI,OAAOM,QACrBJ,EAAQnI,KAAKmI,MAAMI,QAEnBC,EAAWP,EAAOQ,wBAClBC,EAAoBP,EAAMQ,UAAUC,SAAS5I,KAAKJ,MAAM4C,QAAQqG,YAEjEH,GAAqBF,EAASM,QAAU,EAE3C9I,KAAKsB,SAAS,CACZ+G,SAAS,IAEFK,GAAqBF,EAASM,QAAU9I,KAAKoI,gBAAgBW,KAEtE/I,KAAKsB,SAAS,CACZ+G,SAAS,gDAMb,IAAMJ,EAASjI,KAAKiI,OAAOM,QAC3BvI,KAAKoI,gBAAkBH,EAAOQ,wBAE9BO,OAAOC,iBAAiB,SAAUjJ,KAAKsI,6DAIvCU,OAAOE,oBAAoB,SAAUlJ,KAAKsI,+CAGnC,IACC9F,EAAYxC,KAAKJ,MAAjB4C,QACA6F,EAAYrI,KAAKI,MAAjBiI,QAER,OACE5F,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQK,KAAMsG,IAAKnJ,KAAKiI,QACtCxF,EAAAC,EAAAC,cAAA,OAAKC,UAAWwG,KAAW5G,EAAQ6G,MAATvJ,OAAAuG,EAAA,EAAAvG,CAAA,GAAmB0C,EAAQqG,UAAYR,IAAYc,IAAKnJ,KAAKmI,OAErF1F,EAAAC,EAAAC,cAACoC,EAAArC,EAAD,CAAQsC,SAAS,SAASpC,UAAWJ,EAAQyC,QAC3CxC,EAAAC,EAAAC,cAACuC,EAAAxC,EAAD,CAASE,UAAWJ,EAAQ8G,SAC1B7G,EAAAC,EAAAC,cAAC4G,GAAD,CAASzC,GAAG,QAAQE,WAAW,SAC/BvE,EAAAC,EAAAC,cAAC4G,GAAD,CAASzC,GAAG,QAAQE,WAAW,SAC/BvE,EAAAC,EAAAC,cAAC4G,GAAD,CAASzC,GAAG,WAAWE,WAAW,YAClCvE,EAAAC,EAAAC,cAAC4G,GAAD,CAASzC,GAAG,SAASE,WAAW,qBAzDzB7C,IAAMC,WAuEZ0B,OACbzB,qBAvGa,SAAAC,GAAK,MAAK,CACvBzB,KAAM,CACJ2G,OAAQ,IAEVH,MAAO,CACLN,KAAM,IAERF,UAAW,CACT7D,SAAU,QACVyE,MAAO,OACPC,QAAS,GACTC,OAAQ,EACRC,UAAW,CACTF,QAAS,GAEXG,WAAY,sBACZd,IAAK,GAEP9D,OAAQ,CACNiB,UAAW,OACXC,gBAAiB,SAEnBmD,QAAS,CACP5C,WAAY,OACZoD,YAAa,OACbC,UAAW,GACXP,OAAQ,GACRQ,QAAS,MA6EXrD,MAFab,CAGbkC,4CC/FIiC,8MACJ7J,MAAQ,CACN2I,KAAK,KAGPmB,aAAe,SAACC,EAAM9J,GAAP,OAAgB,WAC7BR,EAAKyB,SAALxB,OAAAuG,EAAA,EAAAvG,CAAA,GACGqK,EAAO9J,8EAIH,IACCmC,EAAYxC,KAAKJ,MAAjB4C,QAEF4H,EACJ3H,EAAAC,EAAAC,cAAC0H,GAAA3H,EAAD,CAAME,UAAWJ,EAAQ4H,UACvB3H,EAAAC,EAAAC,cAAC4G,GAAD,CAASzC,GAAG,QAAQE,WAAW,SAC/BvE,EAAAC,EAAAC,cAAC4G,GAAD,CAASzC,GAAG,QAAQE,WAAW,SAC/BvE,EAAAC,EAAAC,cAAC4G,GAAD,CAASzC,GAAG,WAAWE,WAAW,YAClCvE,EAAAC,EAAAC,cAAC4G,GAAD,CAASzC,GAAG,SAASE,WAAW,WAIpC,OACEvE,EAAAC,EAAAC,cAACF,EAAAC,EAAM4H,SAAP,KACE7H,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CAAQE,UAAWJ,EAAQ+H,WAAYtH,QAASjD,KAAKkK,aAAa,OAAO,IACvEzH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,iBAAiB4E,MAAO,CAAEtD,MAAO,SAA9C,SAEFzB,EAAAC,EAAAC,cAAC6H,GAAA9H,EAAD,CAAQ+H,OAAO,MAAMpK,KAAML,KAAKI,MAAM2I,IAAK5F,QAASnD,KAAKkK,aAAa,OAAO,IAC3EzH,EAAAC,EAAAC,cAAA,OACE+H,SAAU,EACVhF,KAAK,SACLzC,QAASjD,KAAKkK,aAAa,OAAO,GAClCS,UAAW3K,KAAKkK,aAAa,OAAO,IAEnCE,YAnCYjG,IAAMC,WA+ChBC,wBA7DA,CACb+F,SAAU,CACR1F,QAAS,OACTkG,cAAe,SACfC,eAAgB,SAChBC,WAAY,SACZC,SAAU,IACV5E,gBAAiB,WAEnBoE,WAAY,CACVQ,SAAU,KAmDC1G,CAAmB4F,gEC3CnBe,OAzBf,WACC,OAAO,IAAIC,QAAQ,SAACC,EAASC,GAC5B,IAAIC,EAAS,GAEFxM,IAASS,YACjBoC,WAAW,UAAU4J,MAAM1J,KAAK,SAAC2J,GAC/BA,EAASC,OACZJ,EAAO,gCAERG,EAASE,QAAQ,SAACC,GACjB,IAAMC,EAAQD,EAAIE,OAClBP,EAAOQ,KAAK,CACX5J,GAAI0J,EAAM1J,GACV6J,KAAMH,EAAMG,KACZC,IAAKJ,EAAMI,IACXC,SAAUL,EAAMK,SAChBC,SAAUN,EAAMM,SAChBC,YAAaP,EAAMO,gBAGrBf,EAAQE,QCJIc,GAlBQ,SAACC,GACvB,IAAIC,GAAe,EASnB,MAAO,CACND,QARsB,IAAIlB,QAAQ,SAACC,EAASC,GAC5CgB,EAAQxK,KACP,SAAA0K,GAAG,OAAID,EAAejB,EAAO,CAAEmB,YAAY,IAAUpB,EAAQmB,IAC7D,SAAAE,GAAK,OAAmBpB,EAAfiB,EAAsB,CAAEE,YAAY,GAAiBC,OAM/DC,OAFM,WAGLJ,GAAe,KCqBZK,eACJ,SAAAA,EAAY7M,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAyM,IACjB5M,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA2M,GAAAtM,KAAAH,KAAMJ,KAgBR8M,YAAcC,GAAsB3B,MAflCnL,EAAKO,MAAQ,CACXK,SAAU,GACVmM,WAAW,EACXC,SAAS,GAEXhN,EAAKiN,aAAejN,EAAKiN,aAAa5L,KAAlBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KAPHA,8EAWjBG,KAAKsB,SAAS,CACZsL,WAAW,EACXC,SAAS,gDAMO,IAAAtK,EAAAvC,KAClBA,KAAK0M,YACFP,QACAxK,KAAK,SAACyJ,GACL,IAAM2B,EAAc3B,EAAO4B,KAAKC,MAAMD,KAAKE,SAAW9B,EAAO+B,SAC7D5K,EAAKjB,SAAS,CACZb,SAAUsM,EAAYjB,QAGzBsB,MAAM,SAACC,GAAD,OAAYjL,QAAQC,IAAI,aAAcgL,EAAOf,6DAItDtM,KAAK0M,YAAYF,0CAGV,IACChK,EAAYxC,KAAKJ,MAAjB4C,QADDjB,EAEkCvB,KAAKI,MAAtCK,EAFDc,EAECd,SAAUmM,EAFXrL,EAEWqL,UAAWC,EAFtBtL,EAEsBsL,QAE7B,OACEpK,EAAAC,EAAAC,cAAA,WACGkK,EACCpK,EAAAC,EAAAC,cAAC2K,GAAA5K,EAAD,CAAOE,UAAWwG,KAAW5G,EAAQK,KAAML,EAAQ+K,QACjD9K,EAAAC,EAAAC,cAAC6K,GAAA9K,EAAD,OACS,KACbD,EAAAC,EAAAC,cAAC8K,GAAA/K,EAAD,CACEgL,GAAId,EACJe,QAAS,CAAEC,MAAO,IAAMC,KAAM,IAE9BpL,EAAAC,EAAAC,cAAC2K,GAAA5K,EAAD,CAAOE,UAAWJ,EAAQ+K,MAAO/F,MAAO,CAAEsG,gBAAe,OAAAC,OAAStN,EAAT,OACvDgC,EAAAC,EAAAC,cAAA,OAAKqL,IAAKvN,EAAUwN,IAAI,UAAUC,OAAQlO,KAAK8M,aAActF,MAAO,CAAE9C,QAAS,oBAnDnEP,IAAMC,WA+DfC,wBArFA,SAAAC,GAAK,IAAA6J,EAAA,MAAK,CACvBtL,KAAM,CACJ6B,QAAS,OACTkG,cAAe,SACfC,eAAgB,SAChBC,WAAY,UAEdyC,OAAKY,EAAA,GAAArO,OAAAuG,EAAA,EAAAvG,CAAAqO,EACF7J,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BiD,OAAQ,uBAFP1J,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,QAII,QAJJrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,SAKK,sBALLrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,qBAMiB,UANjBrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,mBAOe,aAPfrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,iBAQa,SARbrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,QASI,QATJrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,YAUQ,QAVRrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,eAWW,OAXXA,KA8EQ9J,CAAmBoI,ICnEnBpI,4BAtBA,SAAAC,GAAK,MAAK,CACvBzB,KAAM,CACJoD,SAAU,KAoBC5B,CAhBf,SAAczE,GAAO,IACX4C,EAAY5C,EAAZ4C,QACR,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQK,MACtBJ,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM2L,WAAS,EAAC9J,QAAS,EAAG+J,QAAQ,UAClC7L,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAACC,GAAI,IACb/L,EAAAC,EAAAC,cAAC8L,GAAD,oBCeKpK,4BA3BA,SAACC,GAAD,MAAY,CACzBzB,KAAM,CACJ6B,QAAS,OACTmG,eAAgB,SAChBrB,OAAQ,QAEX+D,MAAO,CACJ9D,MAAO,IACPD,OAAQ,OACRrD,gBAAiB,aAkBN9B,CAdf,SAAezE,GAAO,IACZ4C,EAAY5C,EAAZ4C,QAER,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQK,MACtBJ,EAAAC,EAAAC,cAAC2K,GAAA5K,EAAD,CAAOE,UAAWJ,EAAQ+K,OACxB9K,EAAAC,EAAAC,cAAC+L,GAAA,EAAD,CAAYrJ,MAAM,UAAlB,wCCkCFsJ,eACJ,SAAAA,EAAY/O,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2O,IACjB9O,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6O,GAAAxO,KAAAH,KAAMJ,KAORgP,qBAAuBjC,GAAsB,IAAI1B,QAAQ,SAACC,EAASC,GACtDvM,IAASS,YACjBoC,WAAW,UAAUgK,IAAI,cAAcJ,MAAM1J,KAAK,SAAC8J,GAC/CA,EAAIoD,QAAQ1D,EAAO,qBACxBD,EAAQO,EAAIE,OAAOmD,iBAVrBjP,EAAKO,MAAQ,CACX2O,eAAgB,GAChBC,SAAS,GAJMnP,mFAgBC,IAAA0C,EAAAvC,KAClBA,KAAK4O,qBACFzC,QACAxK,KAAK,SAACmN,GACLvM,EAAKjB,SAAS,CACZyN,eAAgBD,EAChBE,SAAS,MAGZ5B,MAAM,SAACC,GAAD,OAAYjL,QAAQC,IAAI,aAAcgL,EAAOf,6DAItDtM,KAAK4O,qBAAqBpC,0CAGnB,IACChK,EAAYxC,KAAKJ,MAAjB4C,QACAwM,EAAYhP,KAAKI,MAAjB4O,QAER,OACEvM,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQK,MACtBJ,EAAAC,EAAAC,cAAC2K,GAAA5K,EAAD,CAAOE,UAAWJ,EAAQ+K,OACxB9K,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM2L,WAAS,EAAC9J,QAAS,EAAG3B,UAAWJ,EAAQyM,qBAC5CjP,KAAKI,MAAM2O,eAAeG,IAAI,SAACvD,EAAMwD,GACpC,OACE1M,EAAAC,EAAAC,cAACyM,GAAA1M,EAAD5C,OAAAuP,OAAA,CACEC,IAAK3D,EAAKK,SAASuD,cACnB7B,GAAIsB,EACJxH,MAAO,CAAEgI,gBAAiB,UACrBR,EAAU,CAAErB,QAAuB,KAAbwB,EAAQ,IAAc,IAEjD1M,EAAAC,EAAAC,cAAC0E,GAAA,EAAD,CAAMP,GAAE,aAAAiH,OAAepC,EAAKK,SAASuD,eAAiB/H,MAAO,CAAEC,eAAgB,SAC7EhF,EAAAC,EAAAC,cAAC+L,GAAA,EAAD,CAAY9L,UAAWJ,EAAQiN,MAAOrK,QAAQ,WAAWC,MAAM,UAC5DsG,EAAKK,wBAnDN7H,IAAMC,WAoEbC,wBApHA,SAAAC,GAAK,IAAA6J,EAAAuB,EAAA,MAAK,CACvB7M,KAAM,CACJsD,gBAAiB,QACjBzB,QAAS,OACToG,WAAY,SACZD,eAAgB,SAChBb,QAAS,MAEXuD,OAAKY,EAAA,CACH1E,MAAO,IACPO,QAAS,cACT2F,UAAW,MAHR7P,OAAAuG,EAAA,EAAAvG,CAAAqO,EAIF7J,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BkD,MAAO,MACPkG,UAAW,KACX3F,QAAS,cACTjC,aAAc,SARbjI,OAAAuG,EAAA,EAAAvG,CAAAqO,EAUF7J,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BkD,MAAO,OACPkG,UAAW,KACX3F,QAAS,cACTjC,aAAc,SAdbjI,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,kBAgBc,SAhBdrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,SAiBK,qBAjBLrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,eAkBW,QAlBXrO,OAAAuG,EAAA,EAAAvG,CAAAqO,EAAA,YAmBQ,QAnBRA,GAqBLc,oBAAqB,CACnBrE,cAAe,UAEjB6E,OAAKC,EAAA,CACHE,aAAc,SADX9P,OAAAuG,EAAA,EAAAvG,CAAA4P,EAEFpL,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BqJ,aAAc,UAHb9P,OAAAuG,EAAA,EAAAvG,CAAA4P,EAKFpL,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BqJ,aAAc,SANb9P,OAAAuG,EAAA,EAAAvG,CAAA4P,EAQH,UAAW,CACTxL,MAAO,UATNpE,OAAAuG,EAAA,EAAAvG,CAAA4P,EAAA,aAWS,iCAXT5P,OAAAuG,EAAA,EAAAvG,CAAA4P,EAAA,WAYO,IAZPA,KAoFQrL,CAAmBsK,gECzGlC,IAsDMkB,eACJ,SAAAA,EAAYjQ,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6P,IACjBhQ,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA+P,GAAA1P,KAAAH,KAAMJ,KAmBRyB,YAAc,WACZxB,EAAKyB,SAAS,CAAEwO,WAAW,KArBVjQ,EAwBnB6M,YAAcC,GAAsB,IAAI1B,QAAQ,SAACC,EAASC,GAAW,IAC3Da,EAAanM,EAAKD,MAAMwH,MAAM2I,OAA9B/D,SACGpN,IAASS,YAEjBoC,WAAW,UAAUuO,MAAM,WAAY,KAAMhE,GAAUX,MAAM1J,KAAK,SAAC2J,GAChEA,EAASC,OAAOJ,EAAO,gDAC3B,IAAI8E,EAAa,GAEjB3E,EAASE,QAAQ,SAACC,GAAQ,IAAAyE,EACmCzE,EAAIE,OAAvD3J,EADgBkO,EAChBlO,GAAI6J,EADYqE,EACZrE,KAAMC,EADMoE,EACNpE,IAAKC,EADCmE,EACDnE,SAAUC,EADTkE,EACSlE,SAAUC,EADnBiE,EACmBjE,YAC3CgE,EAAWrE,KAAK,CAAE5J,KAAI6J,OAAMC,MAAKC,WAAUC,WAAUC,kBAGvDf,EAAQ+E,QAnCVpQ,EAAKO,MAAQ,CACXgL,OAAQ,GACR0E,WAAW,EACXrP,SAAU,GACV0P,UAAW,IAEbtQ,EAAKuQ,WAAavQ,EAAKuQ,WAAWlP,KAAhBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KAClBA,EAAKwB,YAAcxB,EAAKwB,YAAYH,KAAjBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KATFA,0EAYRwQ,GACTrQ,KAAKsB,SAAS,CACZwO,WAAW,EACXrP,SAAU4P,EAAEtM,OAAOuM,QAAQxE,IAC3BqE,UAAWE,EAAEtM,OAAOuM,QAAQhQ,oDAyBZ,IAAAiC,EAAAvC,KAClBA,KAAK0M,YACFP,QACAxK,KAAK,SAACsO,GACL1N,EAAKjB,SAAS,CACZ8J,OAAQ6E,MAGX7C,MAAM,SAACC,GAAD,OAAYjL,QAAQC,IAAI,aAAcgL,EAAOf,yDAGrCiE,GACbA,EAAUC,eAAe,UAAYD,EAAUnJ,MAAM2I,OAAO/D,WAAahM,KAAKJ,MAAMwH,MAAM2I,OAAO/D,UACnGhM,KAAKyQ,gEAKPzQ,KAAK0M,YAAYF,0CAGV,IAAAkE,EAAA1Q,KAAAuB,EAC4CvB,KAAKI,MAAhDgL,EADD7J,EACC6J,OAAQ0E,EADTvO,EACSuO,UAAWrP,EADpBc,EACoBd,SAAU0P,EAD9B5O,EAC8B4O,UAD9BtJ,EAEoB7G,KAAKJ,MAAxB4C,EAFDqE,EAECrE,QAAS4E,EAFVP,EAEUO,MACjB,OACE3E,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQK,MACtBJ,EAAAC,EAAAC,cAAC+L,GAAA,EAAD,CAAY9L,UAAWJ,EAAQwJ,SAAU2E,cAAY,EAACvL,QAAQ,WAAWC,MAAM,UAC5E+B,EAAM2I,OAAO/D,UAEhBvJ,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM2L,WAAS,EAAC9J,QAAS,EAAG+J,QAAQ,UACjClD,EAAO8D,IAAI,SAACvD,GACX,OACElJ,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAACC,GAAI,GAAIoC,GAAI,EAAGC,GAAI,EAAGvB,IAAK3D,EAAK3J,GAAIY,UAAWJ,EAAQsO,UAChErO,EAAAC,EAAAC,cAACoO,GAAArO,EAAD,CAAME,UAAWJ,EAAQwO,KAAMC,MAAOtF,EAAKK,SAASuD,eAClD9M,EAAAC,EAAAC,cAACuO,GAAAxO,EAAD,CACEE,UAAWJ,EAAQ2O,MACnBzF,MAAOC,EAAKI,SACZqF,WAAUzF,EAAKG,IACfxL,MAAOqL,EAAKE,KACZ5I,QAASyN,EAAKN,kBAO1B3N,EAAAC,EAAAC,cAAC0O,GAAA3O,EAAD,CACEU,kBAAiBgE,EAAM2I,OAAO/D,SAC9BsF,mBAAiB,SACjBjR,KAAMyP,GAENrN,EAAAC,EAAAC,cAAA,OAAK6E,MA1JN,CACLuB,IAAG,GAAAgF,OAJO,EAIP,KACHwD,KAAI,GAAAxD,OAJO,EAIP,KACJyD,UAAS,cAAAzD,OANC,EAMD,QAAAA,OALE,EAKF,OAuJ0BnL,UAAWJ,EAAQ+K,MAAOtK,QAASjD,KAAKqB,aACnEoB,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQiP,gBACtBhP,EAAAC,EAAAC,cAAA,OACEqL,IAAKvN,EACLwN,IAAKkC,EACLvN,UAAWJ,EAAQkJ,mBAlGZvH,IAAMC,WA+GdC,wBArKA,SAAAC,GAAK,MAAK,CACvBzB,KAAK/C,OAAAuG,EAAA,EAAAvG,CAAA,CACH4R,WAAY,IACXpN,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BmL,WAAY,IAGhBZ,SAAShR,OAAAuG,EAAA,EAAAvG,CAAA,CACPkK,QAAS,qBACR1F,EAAMgC,YAAYC,KAAK,MAAQ,CAC9ByD,QAAS,IAGbgC,SAAU,CACR2D,UAAW,GACXgC,WAAY,uBACZlL,SAAU,GACVmL,cAAe,cAEjBZ,KAAM,CACJvN,OAAQ,OACRmG,UAAW,CACTF,QAAS,IAEXmI,SAAU,IACV9J,aAAc,GAEhB+J,YAAa,CACX3L,gBAAiB,WAEnBgL,MAAO,CACL3H,OAAQ,KAEV+D,MAAO,CACLwE,UAAW,aACXrN,QAAS,OACTmG,eAAgB,SAChBC,WAAY,SACZ9F,SAAU,WACVwE,OAAQ,QACRC,MAAO,QACPtD,gBAAiB,SAEnBsL,eAAgB,CACdO,UAAW,QAIbtG,MAAO,CACLmG,SAAU,OACVG,UAAW,WAmHA3N,CAAmBwL,2LC3LlC,SAASoC,GAAcxQ,EAAYyQ,GAClC,IAAMC,EAAKvT,IAASS,YACpB8S,EAAG1Q,WAAWA,GACZC,IAAIwQ,GACJvQ,KAAK,SAAAyQ,GACL,IAAMxQ,EAAUuQ,EAAG1Q,WAAW,QAAQgK,IAAIyG,EAAQG,QAClDF,EAAGG,eAAe,SAACC,GAClB,OAAOA,EAAElH,IAAIzJ,GAASD,KAAK,SAACH,GAC3B,IAAIgR,EAAqBhR,EAAKmK,OAAO5K,gBAAkB,EACvDwR,EAAEE,OAAO7Q,EAAS,CAAEb,gBAAiByR,QAEpC7Q,KAAK,SAAA+Q,MAELtF,MAAM,SAAAjL,GACRC,QAAQC,IAAI,oCAAqCF,OAGlDiL,MAAM,SAAUb,GAChBnK,QAAQmK,MAAM,yBAA0BA,KCL3C,IAmBMoG,eACL,SAAAA,EAAY/S,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2S,IAClB9S,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6S,GAAAxS,KAAAH,KAAMJ,KACDQ,MAAQ,CACZwS,aAAc,IAEf/S,EAAKgT,eAAiBhT,EAAKgT,eAAe3R,KAApBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KALJA,gFAQF,IAAAgH,EACS7G,KAAKJ,MAAtB6F,EADQoB,EACRpB,KAAM4M,EADExL,EACFwL,OACNO,EAAiB5S,KAAKI,MAAtBwS,aACR,GAAqB,KAAjBA,EAAJ,CAGA,IAAIV,EAAU,CACbG,OAAQA,EACRS,OAAQrN,EAAKsN,SACbtO,SAAUgB,EAAKoG,KACftL,QAASqS,EACThS,KAAMhC,YAAmBiC,UAAUC,MACnCL,SAAUgF,EAAKhF,UAEhBT,KAAKsB,SAAS,CACbsR,aAAc,KAEfX,GAAc,WAAYC,qCAGlB,IAAA3P,EAAAvC,KAAAgT,EACkBhT,KAAKJ,MAAvB4C,EADAwQ,EACAxQ,QAASiD,EADTuN,EACSvN,KACjB,OACChD,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAACoO,GAAArO,EAAD,CAAME,UAAWJ,EAAQwO,MACxBvO,EAAAC,EAAAC,cAACsQ,GAAAvQ,EAAD,CACCE,UAAWJ,EAAQ0Q,OACnBC,OACC1Q,EAAAC,EAAAC,cAACyQ,EAAA1Q,EAAD,CAAQuL,IAAKxI,EAAKoG,KAAMmC,IAAKvI,EAAKhF,SAAUmC,UAAWJ,EAAQ2Q,SAEhE7S,MAAOmF,EAAKoG,QAGdpJ,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACCE,UAAWJ,EAAQ6Q,UACnBrR,GAAG,4BACH0B,MAAM,mBACNE,WAAW,EACX0P,WAAS,EACTC,KAAK,IACL9P,OAAO,SACP2B,QAAQ,WACRpB,MAAOhE,KAAKI,MAAMwS,aAClB/O,SAAU,SAAAC,GAAK,OAAIvB,EAAKjB,SAAS,CAAEsR,aAAc9O,EAAMC,OAAOC,WAE/DvB,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CAAQ0C,QAAQ,WAAWlB,MAAM,UAAUtB,UAAWJ,EAAQO,OAAQE,QAASjD,KAAK6S,gBAApF,mBAtDuB1O,IAAMC,WAkElBC,wBArFA,SAAAC,GAAK,MAAK,CACxB6O,OAAQ,CACP1P,OAAQ,IAETuN,KAAM,CAEL9K,UAAW,QAEZgN,OAAQ,CACPlJ,QAAS,oBAEVjH,OAAQ,CACPU,OAAQa,EAAMC,QAAQC,MAEvB6O,UAAW,CACV1D,WAAY,KAsECtL,CAAmBsO,yBC3E5Ba,oLACK,IAAA3M,EACyB7G,KAAKJ,MAA7B4C,EADDqE,EACCrE,QAASiR,EADV5M,EACU4M,WAEjB,OACEhR,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQK,MACtBJ,EAAAC,EAAAC,cAACoO,GAAArO,EAAD,CAAME,UAAWJ,EAAQwO,MACvBvO,EAAAC,EAAAC,cAACsQ,GAAAvQ,EAAD,CACEE,UAAWJ,EAAQ0Q,OACnBC,OACE1Q,EAAAC,EAAAC,cAACyQ,EAAA1Q,EAAD,CAAQuL,IAAKwF,EAAWhP,SAAUuJ,IAAKyF,EAAWhT,SAAUmC,UAAWJ,EAAQ2Q,SAEjF7S,MAAOmT,EAAWhP,SAClBiP,UAAWD,EAAW7S,OAExB6B,EAAAC,EAAAC,cAACgR,GAAAjR,EAAD,KACED,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,CAAYkR,UAAU,KAAKH,EAAWlT,WAG1CkC,EAAAC,EAAAC,cAACkR,GAAAnR,EAAD,cAnBiByB,IAAMC,WA6BhBC,wBA1CA,SAAAC,GAAK,MAAK,CACvB0M,KAAM,CACJjJ,aAAc,QACd7B,UAAW,QAEbgN,OAAQ,CACNlJ,QAAS,GAEXmJ,OAAQ,CACN1P,OAAQ,MAiCGY,CAAmBmP,ICe5BM,eACJ,SAAAA,EAAYlU,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8T,IACjBjU,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgU,GAAA3T,KAAAH,KAAMJ,KACDQ,MAAQ,CACXwS,aAAc,GACdmB,eAAgB,GAChBC,UAAU,GAEZnU,EAAKoU,kBAAoBpU,EAAKoU,kBAAkB/S,KAAvBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KACzBA,EAAKqU,eAAiBrU,EAAKqU,eAAehT,KAApBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KARLA,mFAYjBG,KAAKsB,SAAS,SAAAlB,GAAK,MAAK,CAAE4T,UAAW5T,EAAM4T,qDAG5B,IAAAnN,EACW7G,KAAKJ,MAAvBsS,EADOrL,EACPqL,QAASzM,EADFoB,EACEpB,KACTmN,EAAiB5S,KAAKI,MAAtBwS,aACR,GAAqB,KAAjBA,EAAJ,CAGA,IAAIa,EAAa,CACfpB,OAAQH,EAAQG,OAChB8B,UAAWjC,EAAQiC,UACnBrB,OAAQrN,EAAKsN,SACbtO,SAAUgB,EAAKoG,KACftL,QAASqS,EACThS,KAAMhC,IAASS,UAAUwB,UAAUC,MACnCL,SAAUgF,EAAKhF,UAEjBT,KAAKsB,SAAS,CACZsR,aAAc,KAGhBX,GAAc,cAAewB,qCAGtB,IAAAlR,EAAAvC,KAAAgT,EACyChT,KAAKJ,MAA7C4C,EADDwQ,EACCxQ,QAAS0P,EADVc,EACUd,QAASzM,EADnBuN,EACmBvN,KAAM2O,EADzBpB,EACyBoB,YADzB7S,EAE8BvB,KAAKI,MAAlC2T,EAFDxS,EAECwS,eAAgBC,EAFjBzS,EAEiByS,SAExB,OACEvR,EAAAC,EAAAC,cAACoO,GAAArO,EAAD,CAAME,UAAWJ,EAAQwO,MACvBvO,EAAAC,EAAAC,cAACsQ,GAAAvQ,EAAD,CACEyQ,OACE1Q,EAAAC,EAAAC,cAACyQ,EAAA1Q,EAAD,CAAQuL,IAAKiE,EAAQzN,SAAUuJ,IAAKkE,EAAQzR,SAAUmC,UAAWJ,EAAQ2Q,SAE3E7S,MAAO4R,EAAQzN,SACfiP,UAAWxB,EAAQtR,KACnBgC,UAAWJ,EAAQ0Q,SAErBzQ,EAAAC,EAAAC,cAACgR,GAAAjR,EAAD,KACED,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,CAAYkR,UAAU,KAAK1B,EAAQ3R,UAErCkC,EAAAC,EAAAC,cAAC0R,GAAA3R,EAAD,CAAaE,UAAWJ,EAAQ8R,QAASC,sBAAoB,GAC3D9R,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,KAAaqR,GACbtR,EAAAC,EAAAC,cAAC6R,GAAA9R,EAAD,CACEE,UAAWwG,KAAW5G,EAAQiS,OAAT3U,OAAAuG,EAAA,EAAAvG,CAAA,GAClB0C,EAAQkS,WAAaV,IAExB/Q,QAASjD,KAAKiU,kBACdU,gBAAeX,EACfhR,aAAW,aAEXP,EAAAC,EAAAC,cAACiS,GAAAlS,EAAD,QAGJD,EAAAC,EAAAC,cAACkR,GAAAnR,EAAD,MACAD,EAAAC,EAAAC,cAACkS,GAAAnS,EAAD,CAAUgL,GAAIsG,EAAUrG,QAAQ,OAAOmH,eAAa,GAClDrS,EAAAC,EAAAC,cAACgR,GAAAjR,EAAD,KACED,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQ4R,aACrBA,EAAYW,OAAO,SAACC,GAAD,OAAQA,EAAGb,YAAcjC,EAAQiC,YAAWjF,IAAI,SAACuE,GACnE,OACEhR,EAAAC,EAAAC,cAACsS,GAAD,CAAY3F,IAAKmE,EAAWyB,aAAczB,WAAYA,MAI1DhR,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM2L,WAAS,EAAC9J,QAAS,EAAGuG,WAAW,YACrCrI,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,GACP9I,EACChD,EAAAC,EAAAC,cAACyQ,EAAA1Q,EAAD,CAAQuL,IAAKxI,EAAKhB,SAAUuJ,IAAKvI,EAAKhF,SAAUmC,UAAWJ,EAAQ2Q,SACjE,MAGN1Q,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,GACP9I,EACChD,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEV,GAAG,iBACH0B,MAAM,oBACNd,UAAWwG,KAAW5G,EAAQ6Q,UAAW7Q,EAAQ2S,OACjD1R,OAAO,QACP2B,QAAQ,WACRpB,MAAOhE,KAAKI,MAAMwS,aAClB/O,SAAU,SAAAC,GAAK,OAAIvB,EAAKjB,SAAS,CAAEsR,aAAc9O,EAAMC,OAAOC,WAEhEvB,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CAAQ0C,QAAQ,WAAWlB,MAAM,UAAUtB,UAAWJ,EAAQO,OAAQE,QAASjD,KAAKkU,gBAApF,WAIFzR,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,iDArGEyB,IAAMC,WAqHbC,wBAlKA,SAAAC,GAAK,MAAK,CACvB0M,KAAM,CACJjJ,aAAc,QACd7B,UAAW,QAEbgN,OAAQ,CACNlJ,QAAS,GAEXmJ,OAAQ,CACN1P,OAAQ,IAEV2Q,YAAa,CACXgB,YAAa,IAEfd,QAAS,CACP5P,QAAS,QAEX+P,OAAO3U,OAAAuG,EAAA,EAAAvG,CAAA,CACL0R,UAAW,eACX3H,WAAYvF,EAAM+Q,YAAYC,OAAO,YAAa,CAChDC,SAAUjR,EAAM+Q,YAAYE,SAASC,WAEvC9O,WAAY,QACXpC,EAAMgC,YAAYmP,GAAG,MAAQ,CAC5B3L,aAAc,IAGlB4K,WAAY,CACVlD,UAAW,kBAEb/N,OAAQ,CACNA,OAAQa,EAAMC,QAAQC,MAExB6O,UAAW,CACT3M,WAAYpC,EAAMC,QAAQC,KAC1BsF,YAAaxF,EAAMC,QAAQC,MAE7B2Q,MAAO,CACLxF,UAAW,IAEb5M,OAAQ,CACNU,OAAQa,EAAMC,QAAQC,QAyHXH,CAAmByP,IC1K5B4B,eACJ,SAAAA,EAAY9V,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0V,IACjB7V,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA4V,GAAAvV,KAAAH,KAAMJ,KACDQ,MAAQ,CACXuV,SAAU,GACVvB,YAAa,IAJEvU,mFAQC,IAAA0C,EAAAvC,KACVqS,EAAWrS,KAAKJ,MAAhByS,OACFF,EAAKvT,IAASS,YAEpBW,KAAK4V,oBAAsBzD,EAAG1Q,WAAW,YACtCuO,MAAM,SAAU,KAAMqC,GACtBwD,QAAQ,OAAQ,OAChBC,WAAW,SAACxK,GACX,IAAIqK,EAAW,GACfrK,EAASE,QAAQ,SAAC0G,GAAY,IAAA6D,EACkC7D,EAAQvG,OAA9DpL,EADoBwV,EACpBxV,QAAS8R,EADW0D,EACX1D,OAAQS,EADGiD,EACHjD,OAAQlS,EADLmV,EACKnV,KAAM6D,EADXsR,EACWtR,SAAUhE,EADrBsV,EACqBtV,SACjDkV,EAAS/J,KAAK,CACZyG,OAAQA,EACR8B,UAAWjC,EAAQlQ,GACnBzB,QAASA,EACTK,KAAMA,EAAKiB,SAASmU,eAAiB,KAAOpV,EAAKiB,SAASoU,qBAC1DnD,OAAQA,EACRrO,SAAUA,EACVhE,SAAUA,MAGd8B,EAAKjB,SAAS,CACZqU,SAAUA,MAIhB3V,KAAKkW,uBAAyB/D,EAAG1Q,WAAW,eACzCuO,MAAM,SAAU,KAAMqC,GACtBwD,QAAQ,OAAQ,OAChBC,WAAW,SAACxK,GACX,IAAI8I,EAAc,GAClB9I,EAASE,QAAQ,SAACiI,GAAe,IAAA0C,EAC0C1C,EAAW9H,OAA5EpL,EADuB4V,EACvB5V,QAAS8R,EADc8D,EACd9D,OAAQ8B,EADMgC,EACNhC,UAAWrB,EADLqD,EACKrD,OAAQlS,EADbuV,EACavV,KAAM6D,EADnB0R,EACmB1R,SAAUhE,EAD7B0V,EAC6B1V,SAC5D2T,EAAYxI,KAAK,CACfyG,OAAQA,EACR8B,UAAWA,EACXe,aAAczB,EAAWzR,GACzBzB,QAASA,EACTK,KAAMA,EAAKiB,SAASmU,eAAiB,KAAOpV,EAAKiB,SAASoU,qBAC1DnD,OAAQA,EACRrO,SAAUA,EACVhE,SAAUA,MAGd8B,EAAKjB,SAAS,CACZ8S,YAAaA,qDAMnBpU,KAAK4V,sBACL5V,KAAKkW,0DAGE,IAAA3U,EAC2BvB,KAAKI,MAA/BuV,EADDpU,EACCoU,SAAUvB,EADX7S,EACW6S,YADXvN,EAEmB7G,KAAKJ,MAAvB4C,EAFDqE,EAECrE,QAASiD,EAFVoB,EAEUpB,KAEjB,OACEhD,EAAAC,EAAAC,cAAC2K,GAAA5K,EAAD,CAAOE,UAAWJ,EAAQ+K,OACvBoI,EAASzG,IAAI,SAACgD,GACb,OACEzP,EAAAC,EAAAC,cAACyT,GAAD,CAASxT,UAAWJ,EAAQmT,SAAUrG,IAAK4C,EAAQiC,UAAWjC,QAASA,EAASkC,YAAaA,EAAa3O,KAAMA,cAxE/FtB,IAAMC,WAqFpBC,wBA5FA,SAAAC,GAAK,MAAK,CACvBiJ,MAAO,CACLxF,aAAc,OACd7B,UAAW,UAyFA7B,CAAmBqR,IC9B5BW,eAKJ,SAAAA,EAAYzW,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAqW,IACjBxW,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAuW,GAAAlW,KAAAH,KAAMJ,KALR0W,gBAAiB,EAIEzW,EAHnB0W,eAAgB,EAGG1W,EAFnB2W,SAAU,EAIR3W,EAAKO,MAAQ,CACXW,gBAAiB,EACjB0V,MAAM,EACNzV,MAAO,EACP0V,iBAAiB,GAEnB7W,EAAK8W,mBAAqB9W,EAAK8W,mBAAmBzV,KAAxBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KAC1BA,EAAK+W,WAAa/W,EAAK+W,WAAW1V,KAAhBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KATDA,mFAYC,IAAA0C,EAAAvC,KACZmS,EAAKvT,IAASS,YAEpBW,KAAK6W,gBAAkB1E,EAAG1Q,WAAW,QAAQgK,IAAIzL,KAAKJ,MAAMyS,QAAQyD,WAAW,SAACtU,GAC9E,GAAIA,EAAKqN,OAAQ,CACf,IAAM9N,EAAkBS,EAAKmK,OAAO5K,gBAC9BC,EAAQQ,EAAKmK,OAAO3K,MAE1BuB,EAAKjB,SAAS,CACZP,gBAAiBA,EACjBC,MAAOA,SAGToB,QAAQC,IAAR,UAAA0L,OAAsBxL,EAAK3C,MAAMyS,OAAjC,2CAI2B,kBAApBrS,KAAKJ,MAAM6F,MAAqBzF,KAAKJ,MAAM6F,KAAK+K,eAAe,YACxExQ,KAAK8W,qBAAuB3E,EAAG1Q,WAAW,SAASgK,IAAIzL,KAAKJ,MAAM6F,KAAKqN,QACpErR,WAAW,aAAauO,MAAM,SAAU,KAAMhQ,KAAKJ,MAAMyS,QAAQyD,WAAW,SAACiB,GAC/C,IAAzBA,EAASC,KAAK7J,QAChB5K,EAAKjB,SAAS,WAIZ,OAHAiB,EAAK+T,gBAAiB,EACtB/T,EAAKiU,QAAUO,EAASC,KAAK,GAAGrL,OAAO6K,QAEhC,CACLE,gBAAiBnU,EAAKiU,yDAQjBjG,GAAW,IAAAG,EAAA1Q,KACpByF,EAASzF,KAAKJ,MAAd6F,KAER,GAAIA,IAAS8K,EAAU9K,WAAiBwR,IAATxR,GAAsBA,EAAK+K,eAAe,UAAW,CAClF,IAAI2B,EAAKvT,IAASS,YAClBW,KAAK8W,qBAAuB3E,EAAG1Q,WAAW,SAASgK,IAAIhG,EAAKqN,QACzDrR,WAAW,aAAauO,MAAM,SAAU,KAAMhQ,KAAKJ,MAAMyS,QAAQyD,WAAW,SAACiB,GAC/C,IAAzBA,EAASC,KAAK7J,QAChBuD,EAAKpP,SAAS,WAIZ,OAHAoP,EAAK4F,gBAAiB,EACtB5F,EAAK8F,QAAUO,EAASC,KAAK,GAAGrL,OAAO6K,QAEhC,CACLE,gBAAiBhG,EAAK8F,kBAKvB/Q,IAAS8K,EAAU9K,WAAiBwR,IAATxR,IACpCzF,KAAKsW,gBAAiB,EACtBtW,KAAKwW,SAAU,EAEfxW,KAAKsB,SAAS,CACZoV,iBAAiB,oDAMrB1W,KAAK6W,kBACD7W,KAAK8W,sBACP9W,KAAK8W,4DAII,IAAAI,EAAAlX,KACX,GAA+B,kBAApBA,KAAKJ,MAAM6F,OAEVzF,KAAKJ,MAAM6F,KAAK+K,eAAe,WAAcxQ,KAAKsW,kBAEnDtW,KAAKuW,cAAT,CAIPvW,KAAKuW,eAAiBvW,KAAKuW,cAC3B,IAAMY,EAAOnX,KAAKwW,SAAW,EAAI,EAEjCxW,KAAKsB,SAAS,CACZoV,iBAAkB1W,KAAKI,MAAMsW,gBAC7B1V,MAAOhB,KAAKI,MAAMY,MAAQmW,IAG5B,IAAMhF,EAAKvT,IAASS,YACduC,EAAUhD,IAASS,YAAYoC,WAAW,QAAQgK,IAAIzL,KAAKJ,MAAMyS,QAEvEF,EAAGG,eAAe,SAACC,GACjB,OAAOA,EAAElH,IAAIzJ,GAASD,KAAK,SAACH,GAC1B,IAAM4V,EAAW5V,EAAKmK,OAAO3K,MAAQmW,EACrC5E,EAAEE,OAAO7Q,EAAS,CAAEZ,MAAOoW,QAE5BzV,KAAK,WACN,IAAM0V,EAAYlF,EAAG1Q,WAAW,SAASgK,IAAIyL,EAAKtX,MAAM6F,KAAKqN,QAAQrR,WAAW,aAChF4V,EAAUrH,MAAM,SAAU,KAAMkH,EAAKtX,MAAMyS,QAAQhH,MAAM1J,KAAK,SAAC2V,GACnC,IAAtBA,EAAMN,KAAK7J,OACbkK,EAAU3V,IAAI,CACZ2Q,OAAQ6E,EAAKtX,MAAMyS,OACnBmE,SAAUU,EAAKV,UACd7U,KAAK,WACNuV,EAAKX,eAAgB,IACpBnJ,MAAM,SAAAjL,GACPC,QAAQC,IAAR,iCAA8CF,KAGhDkV,EAAU5L,IAAI6L,EAAMN,KAAK,GAAGhV,IAAIyQ,OAAO,CACrC+D,SAAUU,EAAKV,UACd7U,KAAK,WACNuV,EAAKX,eAAgB,IACpBnJ,MAAM,SAAAjL,GACPC,QAAQC,IAAR,mCAAgDF,SAIrDiL,MAAM,SAAAjL,GACPC,QAAQC,IAAR,gBAAA0L,OAA4BoJ,EAA5B,oBAAoDhV,mDAKtDnC,KAAKsB,SAAS,SAAAlB,GAAK,MAAK,CACtBqW,MAAOrW,EAAMqW,yCAIR,IAAA5P,EACiC7G,KAAKJ,MAArC4C,EADDqE,EACCrE,QAAShB,EADVqF,EACUrF,KAAM6Q,EADhBxL,EACgBwL,OAAQ5M,EADxBoB,EACwBpB,KADxBlE,EAEmDvB,KAAKI,MAAvDW,EAFDQ,EAECR,gBAAiB0V,EAFlBlV,EAEkBkV,KAAMC,EAFxBnV,EAEwBmV,gBAAiB1V,EAFzCO,EAEyCP,MAIhD,OAFAQ,EAAKZ,KAAO,IAAI2W,KAAK/V,EAAKZ,MAAMoV,eAG9BvT,EAAAC,EAAAC,cAACoO,GAAArO,EAAD,CAAME,UAAWJ,EAAQwO,MACvBvO,EAAAC,EAAAC,cAACsQ,GAAAvQ,EAAD,CACEyQ,OACE1Q,EAAAC,EAAAC,cAACyQ,EAAA1Q,EAAD,CAAQsL,IAAKxM,EAAKhB,UAChBwC,aAAW,SAASJ,UAAWwG,KAAW5G,EAAQ2Q,OAAQ3Q,EAAQgV,aAGtElX,MAAOkB,EAAKlB,MACZoT,UAAWlS,EAAKZ,OAElB6B,EAAAC,EAAAC,cAAA,KAAGgB,KAAK,SAASI,OAAO,SAAS0T,IAAI,sBACnCC,KAAMlW,EAAKd,SACX+B,EAAAC,EAAAC,cAACuO,GAAAxO,EAAD,CACEE,UAAWJ,EAAQ2O,MACnBzF,MAAOlK,EAAKf,SACZH,MAAOkB,EAAKlB,SAGhBmC,EAAAC,EAAAC,cAACgR,GAAAjR,EAAD,KACED,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,CAAYE,UAAWJ,EAAQjC,QAASqT,UAAU,KAC/CpS,EAAKjB,SAERkC,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,CAAYkR,UAAU,IAAIvO,MAAM,OAAOD,QAAQ,WAA/C,cACa3C,EAAAC,EAAAC,cAAA,KAAGgB,KAAK,SAASI,OAAO,SAAS0T,IAAI,sBAC9CC,KAAMlW,EAAKb,aACVa,EAAKb,eAIZ8B,EAAAC,EAAAC,cAAC0R,GAAA3R,EAAD,CAAaE,UAAWJ,EAAQ8R,QAASC,sBAAoB,GAC3D9R,EAAAC,EAAAC,cAAC6R,GAAA9R,EAAD,CAAYM,aAAW,mBAAmBC,QAASjD,KAAK4W,YACrDF,EACCjU,EAAAC,EAAAC,cAACgV,GAAAjV,EAAD,CAAcE,UAAWJ,EAAQoV,YAAgBnV,EAAAC,EAAAC,cAACgV,GAAAjV,EAAD,CAAcE,UAAWJ,EAAQqV,cACpFpV,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,KAAa1B,IAEfyB,EAAAC,EAAAC,cAAC6R,GAAA9R,EAAD,CACEO,QAASjD,KAAK2W,mBACdhC,gBAAe8B,EACfzT,aAAW,WACXP,EAAAC,EAAAC,cAACmV,GAAApV,EAAD,MACAD,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,KAAa3B,KAGjB0B,EAAAC,EAAAC,cAACkS,GAAAnS,EAAD,CAAUgL,GAAI+I,EAAM9I,QAAQ,OAAOmH,eAAa,GAC9CrS,EAAAC,EAAAC,cAACkR,GAAAnR,EAAD,MACAD,EAAAC,EAAAC,cAACgR,GAAAjR,EAAD,KACED,EAAAC,EAAAC,cAACoV,GAAD,CAAgB1F,OAAQA,EAAQ5M,KAAMA,IACrCA,EACChD,EAAAC,EAAAC,cAACqV,GAAD,CAAc3F,OAAQA,EAAQ5M,KAAMA,IACpChD,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,8CAxMKyB,IAAMC,WAqNVC,wBArQA,SAAAC,GAAK,MAAK,CACvB0M,KAAM,CACJ9K,UAAW,OACXE,aAAc,oBACd2B,aAAc,GAEhBoJ,MAAO,CACLO,WAAY,UAEdyB,OAAQ,CACN1P,OAAQ,IAEV+T,UAAW,CACT/N,MAAO,GACPD,OAAQ,IAEVjJ,QAAS,CACPiJ,OAAQ,GACR9E,QAAS,cACTuT,SAAU,SACVC,UAAW,WACXC,aAAc,WACdC,UAAW,GAEb9D,QAAS,CACP5P,QAAS,QAEX+P,OAAO3U,OAAAuG,EAAA,EAAAvG,CAAA,CACL0R,UAAW,eACX3H,WAAYvF,EAAM+Q,YAAYC,OAAO,YAAa,CAChDC,SAAUjR,EAAM+Q,YAAYE,SAASC,WAEvC9O,WAAY,QACXpC,EAAMgC,YAAYmP,GAAG,MAAQ,CAC5B3L,aAAc,IAGlB4K,WAAY,CACVlD,UAAW,kBAEboG,UAAW,CACT1T,MAAO,WAET2T,YAAa,CACX3T,MAAO,UAyNIG,CAAmBgS,IC/Q5BlH,GADS1P,EAHAV,aACaA,oCAGPkD,UAAU,cAkBhBoW,OAhBf,SAAiBC,GAChB,OAAO,IAAIrN,QAAQ,SAACC,GACnBiE,GAAMoJ,OACL,CACCD,MAAOA,EAEPE,YAAa,IAEd,SAAoBrW,EAAK5B,GACxB,GAAI4B,EAAK,MAAMA,EACf+I,EAAQ3K,QCgDNkY,eACJ,SAAAA,EAAY7Y,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAyY,IACjB5Y,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA2Y,GAAAtY,KAAAH,KAAMJ,KAYR8Y,eAAiB/L,GAAsB0L,GAAQ,KAX7CxY,EAAKO,MAAQ,CACXuY,MAAO,IAET9Y,EAAK+Y,qBAAuB/Y,EAAK+Y,qBAAqB1X,KAA1BpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KAC5BA,EAAKgZ,uBAAyBhZ,EAAKgZ,uBAAuB3X,KAA5BpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KANbA,sIAeEiE,GAAO,IAAAvB,EAAAvC,KACpB8Y,EAAchV,EAAMC,OAAOC,MACjChE,KAAK0Y,eAAiB/L,GAAsB0L,GAAQS,IAEpD9Y,KAAK0Y,eACFvM,QACAxK,KAAK,SAACpB,GACLgC,EAAKjB,SAAS,CACZqX,MAAOpY,EAAQwY,qDAKH,IAAArI,EAAA1Q,KAClBA,KAAK0Y,eACFvM,QACAxK,KAAK,SAACpB,GACLmQ,EAAKpP,SAAS,CACZqX,MAAOpY,EAAQwY,wDAMrB/Y,KAAK0Y,eAAelM,0CAGb,IAAA0K,EAAAlX,KACCwC,EAAYxC,KAAKJ,MAAjB4C,QACAmW,EAAU3Y,KAAKI,MAAfuY,MAER,OACElW,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQK,MACtBJ,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM2L,WAAS,EAAC9J,QAAS,EAAG3B,UAAWJ,EAAQwW,WAC7CvW,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAACC,GAAI,GAAIoC,GAAI,EAAGhO,UAAWJ,EAAQyW,kBAC3CxW,EAAAC,EAAAC,cAACwC,GAAAzC,EAAD,CAAY0C,QAAQ,QAAQuL,cAAc,EAAMtL,MAAM,OAAOzC,UAAWJ,EAAQ0W,eAAhF,oBAIFzW,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAACC,GAAI,GAAIoC,GAAI,GACrBnO,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEE,UAAWJ,EAAQ6Q,UACnBxP,SAAU7D,KAAK4Y,qBACf5W,GAAG,kBACH0B,MAAM,YACNC,KAAK,SACLF,OAAO,SACP2B,QAAQ,cAGZ3C,EAAAC,EAAAC,cAACkR,GAAAnR,EAAD,OAEFD,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM2L,WAAS,EAAC9J,QAAS,EAAG3B,UAAWJ,EAAQ2W,MAC7C1W,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAAC6K,GAAI,GAAIxI,GAAI,GACrBnO,EAAAC,EAAAC,cAAA,OAAKC,UAAWJ,EAAQmW,OACtBlW,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM2L,WAAS,EAAC9J,QAAS,GACtBoU,EAAMzJ,IAAI,SAAC1N,GACV,OACEiB,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAACC,GAAI,GAAIc,IAAK9N,EAAKO,UAC3BU,EAAAC,EAAAC,cAAC0W,GAAA3W,EAAD,CAAUE,UAAWJ,EAAQ8W,SAAUC,eAAgB,IAAMC,iBAAkBtC,EAAK2B,wBAClFpW,EAAAC,EAAAC,cAAC4C,GAAYC,SAAb,KACG,SAAAC,GAAI,OAAIhD,EAAAC,EAAAC,cAAC8W,GAAD,CAAMpH,OAAQ7Q,EAAKO,SAAUP,KAAMA,EAAMiE,KAAMA,aASxEhD,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAAC6K,GAAI,GAAIxI,GAAI,GACrBnO,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM2L,WAAS,EAAC9J,QAAS,EAAG3B,UAAWJ,EAAQ2W,MAC7C1W,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAAC6K,GAAI,EAAGxI,GAAI,IAGtBnO,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAAC6K,GAAI,EAAGxI,GAAI,eA3FjBzM,IAAMC,WA0GVC,wBAnKA,SAAAC,GAAK,IAAAoV,EAAAC,EAAAC,EAAA,MAAK,CACvB/W,KAAM,CACJoD,SAAU,GAEZkT,KAAKrZ,OAAAuG,EAAA,EAAAvG,CAAA,GACFwE,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BqE,cAAe,mBAGnBoO,UAAW,CACTlO,WAAY,YAEduI,UAAW,CACT3M,WAAYpC,EAAMC,QAAQC,KAC1BsF,YAAaxF,EAAMC,QAAQC,MAE7B0U,eAAaQ,EAAA,GAAA5Z,OAAAuG,EAAA,EAAAvG,CAAA4Z,EACVpV,EAAMgC,YAAYC,KAAK,MAAQ,CAC9ByD,QAAS,oBACTvD,SAAU,KAHD3G,OAAAuG,EAAA,EAAAvG,CAAA4Z,EAAA,QAKJ,QALIA,GAObT,kBAAgBU,EAAA,CACdjT,WAAY,OADE5G,OAAAuG,EAAA,EAAAvG,CAAA6Z,EAEbrV,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BG,WAAY,QAHA5G,OAAAuG,EAAA,EAAAvG,CAAA6Z,EAKbrV,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BG,WAAY,OANAiT,GAShBhB,OAAKiB,EAAA,CACHlT,WAAY,OADT5G,OAAAuG,EAAA,EAAAvG,CAAA8Z,EAEFtV,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BG,WAAY,QAHX5G,OAAAuG,EAAA,EAAAvG,CAAA8Z,EAKFtV,EAAMgC,YAAYC,KAAK,MAAQ,CAC9B9C,OAAQ,OANP3D,OAAAuG,EAAA,EAAAvG,CAAA8Z,EAQFtV,EAAMgC,YAAYC,KAAK,MAAQ,CAC9B9C,OAAQ,OATPmW,GAYLzG,OAAQ,CACN1P,OAAQ,IAEV6V,SAASxZ,OAAAuG,EAAA,EAAAvG,CAAA,CACP4E,QAAS,eACTM,SAAU,WACVwE,OAAQ,KACPlF,EAAMgC,YAAYC,KAAK,MAAQ,CAC9BiD,OAAQ,QA+GCnF,CAAmBoU,IC1JrBlT,GAAcpB,IAAM0V,gBAE3BvV,GAAQwV,yBAAe,CAC3BC,QAAS,CACPC,QAASC,OAsCPC,eACJ,SAAAA,EAAYta,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAka,IACjBra,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAoa,GAAA/Z,KAAAH,KAAMJ,KAQRua,eAAiB,SAACC,IRrDpB,SAAiBC,GAChB,GAA0B,kBAAfA,GAA2BA,EAAW7J,eAAe,YAAa,CAE5E,IAAI/K,EAAO,CACVsN,SAAUsH,EAAWtH,SACrBuH,MAAO,OACP7Z,SAAU4Z,EAAW5Z,SACrBoL,KAAMwO,EAAWxO,KACjB0O,WAAYF,EAAWE,WACvBC,UAAWH,EAAWG,UACtB9U,KAAM,IAGP,OAAO,IAAIuF,QAAQ,SAACC,GACnB,IAAMuP,EAAQ7b,IAASS,YAAYoC,WAAW,SAE9CgZ,EAAMzK,MAAM,WAAY,KAAMvK,EAAKsN,UAAU1H,MAAM1J,KAAK,SAAC2J,GACxD,GAAIA,EAASC,MAGZ9F,EAAKC,KAAO,OAEZ+U,EAAM/Y,IAAI+D,GAAM9D,KAAK,SAAC8J,GAErBhG,EAAKqN,OAASrH,EAAIzJ,GAClBkJ,EAAQzF,KAEP2H,MAAM,SAAUb,GAChBnK,QAAQmK,MAAM,0BAA2BA,SAErC,CAEN,IAAMuG,EAASxH,EAAS0L,KAAK,GAAGhV,GAEhCyY,EAAMhP,IAAIqH,GACRL,OAAO,CACP5G,KAAMpG,EAAKoG,KACX0O,WAAY9U,EAAK8U,WACjBC,UAAW/U,EAAK+U,UAChB/Z,SAAUgF,EAAKhF,WAEfkB,KAAK,WACL8Y,EAAMhP,IAAIqH,GAAQzH,MAAM1J,KAAK,SAAC8J,GAC7B,IAAIiP,EAAUjP,EAAIE,OAElB+O,EAAQ5H,OAASrH,EAAIzJ,GACrBkJ,EAAQwP,UAIVtN,MAAM,SAAUb,GACjBnK,QAAQC,IAAI,0BAA2BkK,SQGxCoO,CAAQP,EAAIQ,YAAYjZ,KAAK,SAAC8D,GAC5B5F,EAAKyB,SAAS,CACZmE,KAAMA,OAZO5F,EAiBnBgb,OAAS,WACPhb,EAAKyB,SAAS,CACZmE,UAAMwR,KAjBRpX,EAAKO,MAAQ,CACXqF,UAAMwR,GAERpX,EAAKsa,eAAiBta,EAAKsa,eAAejZ,KAApBpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KACtBA,EAAKgb,OAAShb,EAAKgb,OAAO3Z,KAAZpB,OAAAqB,EAAA,EAAArB,QAAAqB,EAAA,EAAArB,CAAAD,KANGA,wEAuBV,IACC4F,EAASzF,KAAKI,MAAdqF,KACAjD,EAAYxC,KAAKJ,MAAjB4C,QAER,OACEC,EAAAC,EAAAC,cAACmY,EAAA,iBAAD,CAAkBxW,MAAOA,IACvB7B,EAAAC,EAAAC,cAACoY,EAAA,EAAD,KACEtY,EAAAC,EAAAC,cAAC4C,GAAYyV,SAAb,CAAsBhX,MAAOyB,GAC3BhD,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM2L,WAAS,EAAC9J,QAAS,EAAG3B,UAAWJ,EAAQK,MAC7CJ,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAACC,GAAI,GAAI4K,GAAI,IACrB3W,EAAAC,EAAAC,cAACsY,GAAD,KACGxV,EACChD,EAAAC,EAAAC,cAACuY,EAAA,aAAD,CACEtY,UAAWJ,EAAQ2Y,aACnBC,IAAK,MACLC,WAAW,GACXC,gBAAiBtb,KAAK6a,QAEtBpY,EAAAC,EAAAC,cAACyQ,EAAA1Q,EAAD,CAAQE,UAAWJ,EAAQ2Q,OAAQlF,IAAKxI,EAAKhB,SAAUuJ,IAAKvI,EAAKhF,YAEnEgC,EAAAC,EAAAC,cAACuY,EAAA,YAAD,CACEtY,UAAWJ,EAAQ+Y,YACnBC,SAAUzc,2EACVqc,IAAK,SACLK,OAAQ,QACRJ,WAAW,eACXK,UAAW1b,KAAKma,eAChBwB,UAAW3b,KAAKma,eAChByB,YAAY,MAMpBnZ,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAACC,GAAI,EAAG4K,GAAI,IACpB3W,EAAAC,EAAAC,cAACkZ,EAAAnZ,EAAD,CAAQoZ,KAAM,CAAC,OACbrZ,EAAAC,EAAAC,cAACoZ,GAAD,OAEFtZ,EAAAC,EAAAC,cAACkZ,EAAAnZ,EAAD,CAAQoZ,KAAM,CAAC,KAAM,KAAM,KAAM,OAC/BrZ,EAAAC,EAAAC,cAACqZ,GAAD,QAGJvZ,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAACC,GAAI,IACb/L,EAAAC,EAAAC,cAACsZ,EAAA,EAAD,KACExZ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOiV,OAAK,EAAChV,KAAK,IAAI0M,UAAWuI,KACjC1Z,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOC,KAAK,QAAQ0M,UAAWuI,KAC/B1Z,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOC,KAAK,SAAS0M,UAAWwI,KAChC3Z,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOC,KAAK,YAAY0M,UAAWjF,KACnClM,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOC,KAAK,sBAAsB0M,UAAW/D,KAC7CpN,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOC,KAAK,QAAQ0M,UAAW6E,KAC/BhW,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOoV,OAAQ,kBAAM5Z,EAAAC,EAAAC,cAAA,6BAGzBF,EAAAC,EAAAC,cAACyL,EAAA1L,EAAD,CAAM6L,MAAI,EAACC,GAAI,gBA7EXpK,aA4FHC,wBA9HA,SAAAC,GAAK,MAAK,CACvBzB,KAAM,CACJoD,SAAU,EACV6E,WAAY,UAEdqI,OAAOrT,OAAAuG,EAAA,EAAAvG,CAAA,GACJwE,EAAMgC,YAAYC,KAAK,MAAQ,CAC9B7B,QAAS,cACT+E,MAAO,GACPD,OAAQ,KAGZ+R,YAAa,CACXvW,SAAU,WACV0B,WAAY,MACZoB,OAAQ,QACR3B,gBAAiB,QACjBjC,MAAO,OACPsF,OAAQ,GACRC,MAAO,GACP1B,aAAc,GACdtB,SAAU,GACV6V,WAAY,OACZ1S,UAAW,CACT9B,OAAQ,sBAGZqT,aAAc,CACZnW,SAAU,WACV0B,WAAY,MACZD,SAAU,MAgGCpC,CAAmB6V,ICrJ5BqC,GAAcC,QACW,cAA7BxT,OAAOjC,SAAS0V,UAEe,UAA7BzT,OAAOjC,SAAS0V,UAEhBzT,OAAOjC,SAAS0V,SAASrV,MACvB,2DAsCN,SAASsV,GAAgBC,GACvBC,UAAUC,cACPC,SAASH,GACThb,KAAK,SAAAob,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB7c,QACfwc,UAAUC,cAAcO,WAK1Bhb,QAAQC,IAAI,6CAKZD,QAAQC,IAAI,2CAMrB+K,MAAM,SAAAb,GACLnK,QAAQmK,MAAM,4CAA6CA,YCvEjE8Q,IAAShB,OAAO5Z,EAAAC,EAAAC,cAAC2a,GAAD,MAASC,SAASC,eAAe,SDYlC,WACb,GAA6C,kBAAmBZ,UAAW,CAGzE,GADkB,IAAIa,IAAI1e,GAAwBiK,OAAOjC,UAC3C2W,SAAW1U,OAAOjC,SAAS2W,OAIvC,OAGF1U,OAAOC,iBAAiB,OAAQ,WAC9B,IAAM0T,EAAK,GAAA5O,OAAMhP,GAAN,sBAEPwd,IAiDV,SAAiCI,GAE/BgB,MAAMhB,GACHhb,KAAK,SAAAic,GAGkB,MAApBA,EAASC,SACuD,IAAhED,EAASE,QAAQzS,IAAI,gBAAgB0S,QAAQ,cAG7CnB,UAAUC,cAAcmB,MAAMrc,KAAK,SAAAob,GACjCA,EAAakB,aAAatc,KAAK,WAC7BqH,OAAOjC,SAASmX,aAKpBxB,GAAgBC,KAGnBvP,MAAM,WACLhL,QAAQC,IACN,mEArEA8b,CAAwBxB,GAIxBC,UAAUC,cAAcmB,MAAMrc,KAAK,WACjCS,QAAQC,IACN,+GAMJqa,GAAgBC,MCvCxByB","file":"static/js/main.5081e3f8.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\n\r\n// Initialize Firebase\r\nvar config = {\r\n  apiKey: process.env.REACT_APP_GOOGLE_apiKey,\r\n  authDomain: process.env.REACT_APP_GOOGLE_authDomain,\r\n  databaseURL: process.env.REACT_APP_GOOGLE_databaseURL,\r\n  projectId: process.env.REACT_APP_GOOGLE_projectId,\r\n  storageBucket: process.env.REACT_APP_GOOGLE_storageBucket,\r\n  messagingSenderId: process.env.REACT_APP_GOOGLE_messagingSenderId\r\n};\r\nfirebase.initializeApp(config);\r\n\r\nconst firestore = firebase.firestore();\r\nconst settings = { timestampsInSnapshots: true };\r\nfirestore.settings(settings);\r\n\r\nexport { firebase };","import algoliasearch from 'algoliasearch';\r\n\r\nconst ALGOLIA_ID = process.env.REACT_APP_ALGOLIA_appId;\r\nconst ALGOLIA_ADMIN_KEY = process.env.REACT_APP_ALGOLIA_adminApiKey;\r\n\r\nconst client = algoliasearch(ALGOLIA_ID, ALGOLIA_ADMIN_KEY);\r\nconst ALGOLIA_INDEX_NAME = 'blog_posts';\r\n\r\n// Update the search index.\r\nfunction AlgoliaUpdateSearchIndex(post) {\r\n\t\t// Write to the algolia index\r\n\t\tconst index = client.initIndex(ALGOLIA_INDEX_NAME);\r\n\t\treturn index.addObject(post, function(err, content) {\r\n\t\t\tif (err) console.log(err);\r\n\t\t\tconsole.log(content);\r\n\t\t  });\r\n}\r\n\r\nexport { AlgoliaUpdateSearchIndex };","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { firebase } from '../../Firebase';\r\nimport { AlgoliaUpdateSearchIndex } from '../../AlgoliaUpdateSearchIndex'\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n// import Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nconst styles = theme => ({\r\n  button: {\r\n    margin: theme.spacing.unit,\r\n    color: 'grey'\r\n  },\r\n  userName: {\r\n    display: 'inline'\r\n  }\r\n});\r\n\r\nclass AdminTools extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false,\r\n      title: '',\r\n      content: '',\r\n      avatarUrl: '',\r\n      imageUrl: '',\r\n      linkUrl: '',\r\n      homepageUrl: '',\r\n      date: firebase.firestore.Timestamp.now(),\r\n      commentsCounter: 0,\r\n      likes: 0\r\n    };\r\n    this.handleAddPost = this.handleAddPost.bind(this);\r\n    this.handleClickOpen = this.handleClickOpen.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n  }\r\n\r\n  handleClickOpen() {\r\n    this.setState({ open: true });\r\n  };\r\n\r\n  handleClose() {\r\n    this.setState({ open: false });\r\n  };\r\n\r\n  handleAddPost() {\r\n    const { title, content, avatarUrl, imageUrl, linkUrl, homepageUrl, date, commentsCounter } = this.state;\r\n    let post = { title, content, avatarUrl, imageUrl, linkUrl, homepageUrl, date, commentsCounter };\r\n\r\n    const blog = firebase.firestore().collection('blog');\r\n    blog.add(post).then((postRef) => {\r\n      delete post.commentsCounter;\r\n      delete post.likes;\r\n      post.date = post.date.toDate().getTime();\r\n      post.objectID = postRef.id;\r\n      \r\n      AlgoliaUpdateSearchIndex(post);\r\n    });\r\n\r\n    this.setState({ open: false });\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {/* <Typography variant=\"body1\" className={classes.userName}>\r\n          Hello admin!\r\n        </Typography> */}\r\n        <Button className={classes.button} aria-label=\"Add post\" onClick={this.handleClickOpen}>\r\n          <i className=\"material-icons\">\r\n            library_add\r\n          </i>\r\n        </Button>\r\n        <Dialog\r\n          open={this.state.open}\r\n          onClose={this.handleClose}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"form-dialog-title\">Article:</DialogTitle>\r\n          <DialogContent>\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              id=\"name\"\r\n              label=\"title\"\r\n              type=\"string\"\r\n              fullWidth\r\n              onChange={event => this.setState({ title: event.target.value })}\r\n            />\r\n            <TextField\r\n              margin=\"dense\"\r\n              id=\"name\"\r\n              label=\"content\"\r\n              type=\"string\"\r\n              fullWidth\r\n              onChange={event => this.setState({ content: event.target.value })}\r\n            />\r\n            <TextField\r\n              margin=\"dense\"\r\n              id=\"name\"\r\n              label=\"avatarUrl\"\r\n              type=\"url\"\r\n              fullWidth\r\n              onChange={event => this.setState({ avatarUrl: event.target.value })}\r\n            />\r\n            <TextField\r\n              margin=\"dense\"\r\n              id=\"name\"\r\n              label=\"imageUrl\"\r\n              type=\"url\"\r\n              fullWidth\r\n              onChange={event => this.setState({ imageUrl: event.target.value })}\r\n            />\r\n            <TextField\r\n              margin=\"dense\"\r\n              id=\"name\"\r\n              label=\"linkUrl\"\r\n              type=\"url\"\r\n              fullWidth\r\n              onChange={event => this.setState({ linkUrl: event.target.value })}\r\n            />\r\n            <TextField\r\n              margin=\"dense\"\r\n              id=\"name\"\r\n              label=\"homepageUrl\"\r\n              type=\"url\"\r\n              fullWidth\r\n              onChange={event => this.setState({ homepageUrl: event.target.value })}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.handleClose} color=\"primary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={this.handleAddPost} color=\"primary\">\r\n              Publish\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAdminTools.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(AdminTools);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport compose from 'recompose/compose';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport withWidth from '@material-ui/core/withWidth';\r\nimport AdminTools from '../blog/AdminTools';\r\nimport { UserContext } from '../../App';\r\n// import IconButton from '@material-ui/core/IconButton';\r\n// import MenuItem from '@material-ui/core/MenuItem';\r\n// import Menu from '@material-ui/core/Menu';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  appbar: {\r\n    boxShadow: 'none',\r\n    backgroundColor: 'white',\r\n    borderBottom: '1px #dbdbdb solid'\r\n  },\r\n  logo: {\r\n    [theme.breakpoints.down('xs')]: {\r\n      textAlign: 'left',\r\n      fontSize: 20,\r\n    },\r\n    flexGrow: 1,\r\n    fontFamily: 'Abril Fatface, cursive',\r\n    color: 'grey'\r\n  },\r\n  adminTools: {\r\n    [theme.breakpoints.down('xs')]: {\r\n      marginLeft: '62.5%',\r\n    },\r\n    position: 'absolute',\r\n    marginLeft: '78%',\r\n  }\r\n});\r\n\r\nclass TopNavBar extends React.Component {\r\n  state = {\r\n    anchorEl: null,\r\n  };\r\n\r\n  handleMenu = event => {\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    // const { auth, anchorEl } = this.state;\r\n    // const open = Boolean(anchorEl);\r\n\r\n    return (\r\n      <div className={classes.root} >\r\n        <AppBar position=\"static\" className={classes.appbar}>\r\n          <Toolbar>\r\n              <Typography variant=\"display1\" align=\"center\" className={classes.logo}>\r\n                AA Photography\r\n              </Typography>\r\n              <UserContext.Consumer>\r\n                {user => user && user.role === 'admin' ? <div className={classes.adminTools}><AdminTools/></div> : null}\r\n              </UserContext.Consumer>\r\n              {this.props.children}\r\n            {/* <IconButton\r\n              aria-owns={open ? 'menu-appbar' : undefined}\r\n              aria-haspopup=\"true\"\r\n              onClick={this.handleMenu}\r\n              color=\"inherit\"\r\n            > */}\r\n            {/* </IconButton> */}\r\n            {/* <Menu\r\n              id=\"menu-appbar\"\r\n              anchorEl={anchorEl}\r\n              anchorOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n              }}\r\n              transformOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n              }}\r\n              open={open}\r\n              onClose={this.handleClose}\r\n            >\r\n              <MenuItem onClick={this.handleClose}>Profile</MenuItem>\r\n              <MenuItem onClick={this.handleClose}>My account</MenuItem>\r\n            </Menu> */}\r\n          </Toolbar>\r\n        </AppBar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTopNavBar.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  width: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default compose(\r\n  withStyles(styles),\r\n  withWidth()\r\n)(TopNavBar);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Route, Link, withRouter } from 'react-router-dom';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst styles = theme => ({\r\n  buttons: {\r\n    [theme.breakpoints.down('xs')]: {\r\n      color: 'white',\r\n    },\r\n    '&:hover': {\r\n      backgroundColor: 'white',\r\n      border: '1px #dbdbdb solid',\r\n      borderRadius: '10px',\r\n      color: 'black'\r\n    },\r\n    padding: 0,\r\n    fontSize: 20,\r\n    textTransform: 'none',\r\n    transition: 'unset',\r\n    minWidth: 63,\r\n    fontFamily: 'Pompiere, cursive',\r\n    borderRadius: 0\r\n  },\r\n});\r\n\r\nclass NavLink extends React.Component {\r\n  render() {\r\n    const { classes, to, location, buttonName } = this.props;\r\n    return (\r\n      <Route path={to} children={({ match }) => \r\n        <Link type=\"button\" replace={match === location.pathname} to={to} style={{textDecoration: \"none\"}}>\r\n          <Button className={classes.buttons}>{buttonName}</Button>\r\n        </Link>\r\n      }/>\r\n    )\r\n  }\r\n}\r\n\r\nNavLink.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\nconst routerNavLink = withRouter(NavLink);\r\n\r\nexport default withStyles(styles)(routerNavLink);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport compose from 'recompose/compose';\r\n\r\nimport classnames from 'classnames';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport withWidth from '@material-ui/core/withWidth';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\n\r\nimport NavLink from './NavLink';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    height: 45\r\n  },\r\n  fixed: {\r\n    top: -45,\r\n  },\r\n  fixedOpen: {\r\n    position: 'fixed',\r\n    width: '100%',\r\n    opacity: .7,\r\n    zIndex: 1,\r\n    '&:hover': {\r\n      opacity: 1,\r\n    },\r\n    transition: 'all .4s ease-in-out',\r\n    top: 0,\r\n  },\r\n  appbar: {\r\n    boxShadow: 'none',\r\n    backgroundColor: 'white',\r\n  },\r\n  toolbar: {\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n    minHeight: 45,\r\n    height: 45,\r\n    padding: 0\r\n  },\r\n});\r\n\r\nclass NavBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.rootEl = React.createRef();\r\n    this.barEl = React.createRef();\r\n    this.initialPosition = {};\r\n\r\n    this.state = {\r\n      isFixed: false,\r\n    }\r\n    this.handleScroll = this.handleScroll.bind(this);\r\n  }\r\n\r\n  handleScroll() {\r\n    const rootEl = this.rootEl.current;\r\n    const barEl = this.barEl.current;\r\n\r\n    const rootRect = rootEl.getBoundingClientRect();\r\n    const hasFixedOpenClass = barEl.classList.contains(this.props.classes.fixedOpen);\r\n    \r\n    if (!hasFixedOpenClass && rootRect.bottom <= 0) {\r\n      // barEl.classList.add(this.props.classes.fixedOpen);\r\n      this.setState({\r\n        isFixed: true\r\n      });\r\n    } else if (hasFixedOpenClass && rootRect.bottom >= this.initialPosition.top) {\r\n      // barEl.classList.remove(this.props.classes.fixedOpen);\r\n      this.setState({\r\n        isFixed: false\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const rootEl = this.rootEl.current;\r\n    this.initialPosition = rootEl.getBoundingClientRect();\r\n    \r\n    window.addEventListener('scroll', this.handleScroll);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('scroll', this.handleScroll);\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { isFixed } = this.state;\r\n\r\n    return (\r\n      <div className={classes.root} ref={this.rootEl}>\r\n        <div className={classnames(classes.fixed, { [classes.fixedOpen]: isFixed })} ref={this.barEl}>\r\n        {/* <div className={classes.fixed} ref={this.barEl}> */}\r\n          <AppBar position=\"static\" className={classes.appbar}>\r\n            <Toolbar className={classes.toolbar}>\r\n              <NavLink to=\"/main\" buttonName=\"Home\" />\r\n              <NavLink to=\"/blog\" buttonName=\"Blog\" />\r\n              <NavLink to=\"/gallery\" buttonName=\"Gallery\" />\r\n              <NavLink to=\"/about\" buttonName=\"About\" />\r\n            </Toolbar>\r\n          </AppBar>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNavBar.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  width: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default compose(\r\n  withStyles(styles),\r\n  withWidth()\r\n)(NavBar);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\n\r\nimport NavLink from './NavLink';\r\n\r\nconst styles = {\r\n  fullList: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    minWidth: 200,\r\n    backgroundColor: '#c1c1c1',\r\n  },  \r\n  menuButton: {\r\n    minWidth: 60\r\n  },\r\n};\r\n\r\nclass DrawerMenu extends React.Component {\r\n  state = {\r\n    top: false\r\n  };\r\n\r\n  toggleDrawer = (side, open) => () => {\r\n    this.setState({\r\n      [side]: open,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    const fullList = (\r\n      <List className={classes.fullList}>\r\n        <NavLink to=\"/main\" buttonName=\"Home\" />\r\n        <NavLink to=\"/blog\" buttonName=\"Blog\" />\r\n        <NavLink to=\"/gallery\" buttonName=\"Gallery\" />\r\n        <NavLink to=\"/about\" buttonName=\"About\" />\r\n      </List>\r\n    );\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Button className={classes.menuButton} onClick={this.toggleDrawer('top', true)}>\r\n          <i className=\"material-icons\" style={{ color: 'grey' }}>menu</i>\r\n        </Button>\r\n        <Drawer anchor=\"top\" open={this.state.top} onClose={this.toggleDrawer('top', false)}>\r\n          <div\r\n            tabIndex={0}\r\n            role=\"button\"\r\n            onClick={this.toggleDrawer('top', false)}\r\n            onKeyDown={this.toggleDrawer('top', false)}\r\n          >\r\n            {fullList}\r\n          </div>\r\n        </Drawer>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nDrawerMenu.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(DrawerMenu);\r\n","import { firebase } from '../../Firebase';\r\n\r\nfunction imageSource() {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlet images = [];\r\n\r\n\t\tconst db = firebase.firestore();\r\n\t\tdb.collection('images').get().then((snapshot) => {\r\n\t\t\tif (snapshot.empty) {\r\n\t\t\t\treject('Firestore: Snapshot is empty');\r\n\t\t\t}\r\n\t\t\tsnapshot.forEach((doc) => {\r\n\t\t\t\tconst image = doc.data();\r\n\t\t\t\timages.push({\r\n\t\t\t\t\tid: image.id,\r\n\t\t\t\t\tname: image.name,\r\n\t\t\t\t\turl: image.url,\r\n\t\t\t\t\tthumbUrl: image.thumbUrl,\r\n\t\t\t\t\tcategory: image.category,\r\n\t\t\t\t\tdescription: image.description\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tresolve(images);\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport default imageSource;\r\n","const makeCancelable = (promise) => {\r\n\tlet hasCanceled_ = false;\r\n\r\n\tconst wrappedPromise = new Promise((resolve, reject) => {\r\n\t\tpromise.then(\r\n\t\t\tval => hasCanceled_ ? reject({ isCanceled: true }) : resolve(val),\r\n\t\t\terror => hasCanceled_ ? reject({ isCanceled: true }) : reject(error)\r\n\t\t);\r\n\t});\r\n\r\n\treturn {\r\n\t\tpromise: wrappedPromise,\r\n\t\tcancel() {\r\n\t\t\thasCanceled_ = true;\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default makeCancelable;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport classnames from 'classnames';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport imageSource from '../gallery/imageSource';\r\nimport makeCancelablePromise from '../helperFunctions/makeCancelablePromise';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  paper: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: 'calc(100vh - 45px)',\r\n    },\r\n    width: '100%',\r\n    height: 'calc(100vh - 85px)',\r\n    backgroundPosition: 'center',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'cover',\r\n    color: 'grey',\r\n    boxShadow: 'none',\r\n    borderRadius: '0px'\r\n  }\r\n});\r\n\r\nclass MainTitle extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      imageUrl: '',\r\n      showImage: false,\r\n      loading: true\r\n    };\r\n    this.handleOnLoad = this.handleOnLoad.bind(this);\r\n  }\r\n\r\n  handleOnLoad() {\r\n    this.setState({\r\n      showImage: true,\r\n      loading: false\r\n    });\r\n  }\r\n\r\n  fetchImages = makeCancelablePromise(imageSource());\r\n\r\n  componentDidMount() {\r\n    this.fetchImages\r\n      .promise\r\n      .then((images) => {\r\n        const randomImage = images[Math.floor(Math.random() * images.length)];\r\n        this.setState({\r\n          imageUrl: randomImage.url\r\n        });\r\n      })\r\n      .catch((reason) => console.log('isCanceled', reason.isCanceled));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.fetchImages.cancel(); // Cancel the promise\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { imageUrl, showImage, loading } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        {loading ?\r\n          <Paper className={classnames(classes.root, classes.paper)}>\r\n            <CircularProgress />\r\n          </Paper> : null}\r\n        <Fade\r\n          in={showImage}\r\n          timeout={{ enter: 2000, exit: 0 }}\r\n        >\r\n          <Paper className={classes.paper} style={{ backgroundImage: `url(${imageUrl})` }}>\r\n            <img src={imageUrl} alt=\"Flowers\" onLoad={this.handleOnLoad} style={{ display: 'none' }} />\r\n          </Paper>\r\n        </Fade>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nMainTitle.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(MainTitle);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport MainTitle from './MainTitle';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1\r\n  }\r\n});\r\n\r\nfunction Main(props) {\r\n  const { classes } = props;\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={0} justify=\"center\">\r\n        <Grid item xs={12}>\r\n          <MainTitle />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n)}\r\n\r\nMain.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Main);\r\n","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { Typography } from '@material-ui/core';\r\n\r\n// import Grid from '@material-ui/core/Grid';\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    height: '90vh'\r\n  },\r\n\tpaper: {\r\n    width: 500,\r\n    height: '100%',\r\n    backgroundColor: '#ebfaf9'\r\n\t}\r\n});\r\n\r\nfunction About(props) {\r\n  const { classes } = props;\r\n  \r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <Typography align='center'>\r\n          About author\r\n        </Typography>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withStyles(styles)(About);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport { firebase } from '../../Firebase';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nimport makeCancelablePromise from '../helperFunctions/makeCancelablePromise';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    backgroundColor: 'white',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: '1%'\r\n  },\r\n  paper: {\r\n    width: 450,\r\n    padding: '4% 0% 4% 0%',\r\n    marginTop: '2%',\r\n    [theme.breakpoints.down('sm')]: {\r\n      width: '65%',\r\n      marginTop: '5%',\r\n      padding: '7% 0% 3% 0%',\r\n      borderRadius: '20px',\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '100%',\r\n      marginTop: '5%',\r\n      padding: '7% 0% 3% 0%',\r\n      borderRadius: '20px',\r\n    },\r\n    backgroundColor: 'white',\r\n    border: '1px #dbdbdb solid',\r\n    borderRadius: '30px',\r\n    boxShadow: 'none',\r\n  },\r\n  categoriesContainer: {\r\n    flexDirection: 'column',\r\n  },\r\n  links: {\r\n    marginBottom: '1.5em',\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '1.1em',\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      marginBottom: '.7em',\r\n    },\r\n    '&:hover': {\r\n      color: 'black',\r\n    },\r\n    fontFamily: 'Fredericka the Great, cursive',\r\n    fontSize: 26\r\n  }\r\n});\r\n\r\nclass Gallery extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      categoriesData: [],\r\n      checked: false\r\n    };\r\n  }\r\n\r\n  fetchImageCategories = makeCancelablePromise(new Promise((resolve, reject) => {\r\n    const db = firebase.firestore();\r\n    db.collection('images').doc('categories').get().then((doc) => {\r\n      if (!doc.exists) reject('Doc doesn\\'t exist');\r\n      resolve(doc.data().categories);\r\n    });\r\n  }));\r\n\r\n  componentDidMount() {\r\n    this.fetchImageCategories\r\n      .promise\r\n      .then((categories) => {\r\n        this.setState({\r\n          categoriesData: categories,\r\n          checked: true\r\n        });\r\n      })\r\n      .catch((reason) => console.log('isCanceled', reason.isCanceled));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.fetchImageCategories.cancel(); // Cancel the promise\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { checked } = this.state;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <Paper className={classes.paper}>\r\n          <Grid container spacing={8} className={classes.categoriesContainer}>\r\n            {this.state.categoriesData.map((data, index) => {\r\n              return (\r\n                <Grow\r\n                  key={data.category.toLowerCase()}\r\n                  in={checked}\r\n                  style={{ transformOrigin: '0 0 0' }}\r\n                  {...(checked ? { timeout: (index + 1) * 1000 } : {})}\r\n                >\r\n                  <Link to={`/category/${data.category.toLowerCase()}`} style={{ textDecoration: \"none\" }}>\r\n                    <Typography className={classes.links} variant=\"display1\" align=\"center\">\r\n                      {data.category}\r\n                    </Typography>\r\n                  </Link>\r\n                </Grow>\r\n              )\r\n            })}\r\n          </Grid>\r\n        </Paper>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nGallery.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Gallery);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { firebase } from '../../Firebase';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nimport makeCancelablePromise from '../helperFunctions/makeCancelablePromise';\r\n\r\nfunction getModalStyle() {\r\n  const top = 0;\r\n  const left = 0;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    paddingTop: 30,\r\n    [theme.breakpoints.down('sm')]: {\r\n      paddingTop: 5,\r\n    }\r\n  },\r\n  gridItem: {\r\n    padding: '45px 0px 45px 0px',\r\n    [theme.breakpoints.down('sm')]: {\r\n      padding: 8,\r\n    }\r\n  },\r\n  category: {\r\n    marginTop: 20,\r\n    fontFamily: 'Great Vibes, cursive',\r\n    fontSize: 56,\r\n    textTransform: 'capitalize'\r\n  },\r\n  card: {\r\n    margin: 'auto', // center the elements\r\n    '&:hover': {\r\n      opacity: 0.8,\r\n    },\r\n    maxWidth: 400,\r\n    borderRadius: 0,\r\n  },\r\n  cardContent: {\r\n    backgroundColor: '#f5f5f5'\r\n  },\r\n  media: {\r\n    height: 250,\r\n  },\r\n  paper: {\r\n    boxSizing: 'border-box',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    position: 'absolute',\r\n    height: '100vh',\r\n    width: '100vw',\r\n    backgroundColor: 'black',\r\n  },\r\n  imageContainer: {\r\n    maxHeight: '100%',\r\n    // border: '2px solid yellow',\r\n    // backgroundColor: 'crimson'\r\n  },\r\n  image: {\r\n    maxWidth: '100%',\r\n    maxHeight: '100vh'\r\n  }\r\n});\r\n\r\nclass Category extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      images: [],\r\n      openModal: false,\r\n      imageUrl: '',\r\n      imageName: ''\r\n    };\r\n    this.handleOpen = this.handleOpen.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n  }\r\n\r\n  handleOpen(e) {\r\n    this.setState({\r\n      openModal: true,\r\n      imageUrl: e.target.dataset.url,\r\n      imageName: e.target.dataset.title,\r\n    });\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({ openModal: false });\r\n  };\r\n\r\n  fetchImages = makeCancelablePromise(new Promise((resolve, reject) => {\r\n    const { category } = this.props.match.params;\r\n    const db = firebase.firestore();\r\n\r\n    db.collection('images').where('category', '==', category).get().then((snapshot) => {\r\n      if (snapshot.empty) reject('There are no documents in the query snapshot');\r\n      let imagesData = [];\r\n\r\n      snapshot.forEach((doc) => {\r\n        const { id, name, url, thumbUrl, category, description } = doc.data();\r\n        imagesData.push({ id, name, url, thumbUrl, category, description });\r\n      });\r\n\r\n      resolve(imagesData);\r\n    });\r\n  }));\r\n\r\n  componentDidMount() {\r\n    this.fetchImages\r\n      .promise\r\n      .then((imagesData) => {\r\n        this.setState({\r\n          images: imagesData\r\n        });\r\n      })\r\n      .catch((reason) => console.log('isCanceled', reason.isCanceled));;\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.hasOwnProperty('match') && prevProps.match.params.category !== this.props.match.params.category) {\r\n      this.setImageSource();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.fetchImages.cancel();\r\n  }\r\n\r\n  render() {\r\n    const { images, openModal, imageUrl, imageName } = this.state;\r\n    const { classes, match } = this.props;\r\n    return (\r\n      <div className={classes.root}>\r\n        <Typography className={classes.category} gutterBottom variant=\"display1\" align=\"center\">\r\n          {match.params.category}\r\n        </Typography>\r\n        <Grid container spacing={0} justify=\"center\">\r\n          {images.map((data) => {\r\n            return (\r\n              <Grid item xs={12} md={6} lg={4} key={data.id} className={classes.gridItem}>\r\n                <Card className={classes.card} about={data.category.toLowerCase()}>\r\n                  <CardMedia\r\n                    className={classes.media}\r\n                    image={data.thumbUrl}\r\n                    data-url={data.url}\r\n                    title={data.name}\r\n                    onClick={this.handleOpen}\r\n                  />\r\n                </Card>\r\n              </Grid>\r\n            )\r\n          })}\r\n        </Grid>\r\n        <Modal\r\n          aria-labelledby={match.params.category}\r\n          aria-describedby='images'\r\n          open={openModal}\r\n        >\r\n          <div style={getModalStyle()} className={classes.paper} onClick={this.handleClose}>\r\n            <div className={classes.imageContainer}>\r\n              <img\r\n                src={imageUrl}\r\n                alt={imageName}\r\n                className={classes.image} />\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nCategory.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Category);\r\n","import { firebase } from '../../Firebase';\r\n\r\nfunction uploadComment(collection, comment) {\r\n\tconst db = firebase.firestore();\r\n\tdb.collection(collection)\r\n\t\t.add(comment)\r\n\t\t.then(commentRef => {\r\n\t\t\tconst postRef = db.collection('blog').doc(comment.postId);\r\n\t\t\tdb.runTransaction((t) => {\r\n\t\t\t\treturn t.get(postRef).then((post) => {\r\n\t\t\t\t\tlet newCommentsCounter = post.data().commentsCounter + 1;\r\n\t\t\t\t\tt.update(postRef, { commentsCounter: newCommentsCounter });\r\n\t\t\t\t});\r\n\t\t\t}).then(result => {\r\n\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.log('Transaction \"+1 comment\" failure:', err);\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch(function (error) {\r\n\t\t\tconsole.error(\"Error adding comment: \", error);\r\n\t\t});\r\n}\r\n\r\nfunction setUser(googleUser) {\r\n\tif (typeof googleUser === 'object' && googleUser.hasOwnProperty('googleId')) {\r\n\t\t// Form of google user object\r\n\t\tlet user = {\r\n\t\t\tgoogleId: googleUser.googleId,\r\n\t\t\temail: 'none', // Otherwise googleUser.email,\r\n\t\t\timageUrl: googleUser.imageUrl,\r\n\t\t\tname: googleUser.name,\r\n\t\t\tfamilyName: googleUser.familyName,\r\n\t\t\tgivenName: googleUser.givenName,\r\n\t\t\trole: '', // User or admin\r\n\t\t};\r\n\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst users = firebase.firestore().collection('users');\r\n\r\n\t\t\tusers.where('googleId', '==', user.googleId).get().then((snapshot) => {\r\n\t\t\t\tif (snapshot.empty) {\r\n\t\t\t\t\t// If doesnt exist add new user\r\n\t\t\t\t\t// Change role\r\n\t\t\t\t\tuser.role = 'user';\r\n\r\n\t\t\t\t\tusers.add(user).then((doc) => {\r\n\t\t\t\t\t\t// Add new doc id to user object\r\n\t\t\t\t\t\tuser.userId = doc.id;\r\n\t\t\t\t\t\tresolve(user);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(function (error) {\r\n\t\t\t\t\t\t\tconsole.error(\"Error adding document: \", error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// If exist update user data.\r\n\t\t\t\t\tconst userId = snapshot.docs[0].id;\r\n\r\n\t\t\t\t\tusers.doc(userId)\r\n\t\t\t\t\t\t.update({\r\n\t\t\t\t\t\t\tname: user.name,\r\n\t\t\t\t\t\t\tfamilyName: user.familyName,\r\n\t\t\t\t\t\t\tgivenName: user.givenName,\r\n\t\t\t\t\t\t\timageUrl: user.imageUrl\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tusers.doc(userId).get().then((doc) => {\r\n\t\t\t\t\t\t\t\tlet userObj = doc.data();\r\n\t\t\t\t\t\t\t\t// Add doc id to user object\r\n\t\t\t\t\t\t\t\tuserObj.userId = doc.id;\r\n\t\t\t\t\t\t\t\tresolve(userObj);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}).catch(function (error) {\r\n\t\t\t\t\tconsole.log(\"Error getting document:\", error);\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport { uploadComment, setUser };","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport { uploadComment } from './uploadSource';\r\n\r\nconst styles = theme => ({\r\n\tavatar: {\r\n\t\tmargin: 10,\r\n\t},\r\n\tcard: {\r\n\t\t// borderRadius: 'unset',\r\n\t\tboxShadow: 'none',\r\n\t},\r\n\theader: {\r\n\t\tpadding: '0px 0px -5px 0px'\r\n\t},\r\n\tbutton: {\r\n\t\tmargin: theme.spacing.unit,\r\n\t},\r\n\ttextField: {\r\n\t\tmarginTop: -5\r\n\t}\r\n});\r\n\r\nclass WriteComment extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcommentField: ''\r\n\t\t};\r\n\t\tthis.publishComment = this.publishComment.bind(this);\r\n\t}\r\n\r\n\tpublishComment() {\r\n\t\tconst { user, postId } = this.props;\r\n\t\tconst { commentField } = this.state;\r\n\t\tif (commentField === '') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet comment = {\r\n\t\t\tpostId: postId,\r\n\t\t\tuserId: user.googleId,\r\n\t\t\tuserName: user.name,\r\n\t\t\tcontent: commentField,\r\n\t\t\tdate: firebase.firestore.Timestamp.now(),\r\n\t\t\timageUrl: user.imageUrl,\r\n\t\t};\r\n\t\tthis.setState({\r\n\t\t\tcommentField: ''\r\n\t\t});\r\n\t\tuploadComment('comments', comment);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, user } = this.props;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Card className={classes.card}>\r\n\t\t\t\t\t<CardHeader\r\n\t\t\t\t\t\tclassName={classes.header}\r\n\t\t\t\t\t\tavatar={\r\n\t\t\t\t\t\t\t<Avatar alt={user.name} src={user.imageUrl} className={classes.avatar} />\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttitle={user.name}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Card>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\tid=\"outlined-multiline-static\"\r\n\t\t\t\t\tlabel=\"Write a comment:\"\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tmultiline\r\n\t\t\t\t\trows=\"4\"\r\n\t\t\t\t\tmargin=\"normal\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={this.state.commentField}\r\n\t\t\t\t\tonChange={event => this.setState({ commentField: event.target.value })}\r\n\t\t\t\t/>\r\n\t\t\t\t<Button variant=\"outlined\" color=\"primary\" className={classes.button} onClick={this.publishComment}>\r\n\t\t\t\t\tPublish\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nWriteComment.propTypes = {\r\n\tclasses: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(WriteComment);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nconst styles = theme => ({\r\n  card: {\r\n    borderRadius: 'unset',\r\n    boxShadow: 'none',\r\n  },\r\n  header: {\r\n    padding: 0\r\n  },\r\n  avatar: {\r\n    margin: 10,\r\n  },\r\n});\r\n\r\nclass SubComment extends React.Component {\r\n  render() {\r\n    const { classes, subcomment } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <Card className={classes.card}>\r\n          <CardHeader\r\n            className={classes.header}\r\n            avatar={\r\n              <Avatar alt={subcomment.userName} src={subcomment.imageUrl} className={classes.avatar} />\r\n            }\r\n            title={subcomment.userName}\r\n            subheader={subcomment.date}\r\n          />\r\n          <CardContent>\r\n            <Typography component=\"p\">{subcomment.content}</Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Divider/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSubComment.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(SubComment);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { firebase } from '../../Firebase';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport classnames from 'classnames';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport SubComment from './SubComment';\r\nimport { uploadComment } from './uploadSource'\r\n\r\nconst styles = theme => ({\r\n  card: {\r\n    borderRadius: 'unset',\r\n    boxShadow: 'none',\r\n  },\r\n  header: {\r\n    padding: 0\r\n  },\r\n  avatar: {\r\n    margin: 10,\r\n  },\r\n  subcomments: {\r\n    paddingLeft: 50\r\n  },\r\n  actions: {\r\n    display: 'flex',\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n    marginLeft: 'auto',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginRight: -8,\r\n    },\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  margin: {\r\n    margin: theme.spacing.unit,\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit,\r\n  },\r\n  dense: {\r\n    marginTop: 16,\r\n  },\r\n  button: {\r\n    margin: theme.spacing.unit,\r\n  },\r\n});\r\n\r\nclass Comment extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      commentField: '',\r\n      commentsNumber: '',\r\n      expanded: false,\r\n    };\r\n    this.handleExpandClick = this.handleExpandClick.bind(this);\r\n    this.sendSubcomment = this.sendSubcomment.bind(this);\r\n  }\r\n\r\n  handleExpandClick() {\r\n    this.setState(state => ({ expanded: !state.expanded }));\r\n  };\r\n\r\n  sendSubcomment() {\r\n    const { comment, user } = this.props;\r\n    const { commentField } = this.state;\r\n    if (commentField === '') {\r\n      return;\r\n    }\r\n    let subcomment = {\r\n      postId: comment.postId,\r\n      commentId: comment.commentId,\r\n      userId: user.googleId,\r\n      userName: user.name,\r\n      content: commentField,\r\n      date: firebase.firestore.Timestamp.now(),\r\n      imageUrl: user.imageUrl\r\n    };\r\n    this.setState({\r\n      commentField: ''\r\n    });\r\n\r\n    uploadComment('subcomments', subcomment);\r\n  }\r\n\r\n  render() {\r\n    const { classes, comment, user, subcomments } = this.props;\r\n    const { commentsNumber, expanded } = this.state;\r\n\r\n    return (\r\n      <Card className={classes.card}>\r\n        <CardHeader\r\n          avatar={\r\n            <Avatar alt={comment.userName} src={comment.imageUrl} className={classes.avatar} />\r\n          }\r\n          title={comment.userName}\r\n          subheader={comment.date}\r\n          className={classes.header}\r\n        />\r\n        <CardContent>\r\n          <Typography component=\"p\">{comment.content}</Typography>\r\n        </CardContent>\r\n        <CardActions className={classes.actions} disableActionSpacing>\r\n          <Typography>{commentsNumber}</Typography>\r\n          <IconButton\r\n            className={classnames(classes.expand, {\r\n              [classes.expandOpen]: expanded,\r\n            })}\r\n            onClick={this.handleExpandClick}\r\n            aria-expanded={expanded}\r\n            aria-label=\"Show more\"\r\n          >\r\n            <ExpandMoreIcon />\r\n          </IconButton>\r\n        </CardActions>\r\n        <Divider />\r\n        <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n          <CardContent>\r\n            <div className={classes.subcomments}>\r\n              {subcomments.filter((el) => el.commentId === comment.commentId).map((subcomment) => {\r\n                return (\r\n                  <SubComment key={subcomment.subcommentId} subcomment={subcomment} />\r\n                )\r\n              })\r\n              }\r\n              <Grid container spacing={8} alignItems=\"flex-end\">\r\n                <Grid item>\r\n                  {user ?\r\n                    <Avatar alt={user.userName} src={user.imageUrl} className={classes.avatar} />\r\n                    : null\r\n                  }\r\n                </Grid>\r\n                <Grid item >\r\n                  {user ?\r\n                    <div>\r\n                      <TextField\r\n                        id=\"outlined-dense\"\r\n                        label=\"Write a response:\"\r\n                        className={classnames(classes.textField, classes.dense)}\r\n                        margin=\"dense\"\r\n                        variant=\"outlined\"\r\n                        value={this.state.commentField}\r\n                        onChange={event => this.setState({ commentField: event.target.value })}\r\n                      />\r\n                      <Button variant=\"outlined\" color=\"primary\" className={classes.button} onClick={this.sendSubcomment}>\r\n                        Answer\r\n\t\t\t\t\t\t\t    </Button>\r\n                    </div> :\r\n                    <Typography>Sign in to write a comment.</Typography>\r\n                  }\r\n                </Grid>\r\n              </Grid>\r\n            </div>\r\n          </CardContent>\r\n        </Collapse>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nComment.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Comment);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { firebase } from '../../Firebase';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport Comment from './Comment';\r\n\r\nconst styles = theme => ({\r\n  paper: {\r\n    borderRadius: 'none',\r\n    boxShadow: 'none',\r\n  },\r\n});\r\n\r\nclass CommentSection extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      comments: [],\r\n      subcomments: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { postId } = this.props;\r\n    const db = firebase.firestore();\r\n    \r\n    this.unsubscribeComments = db.collection('comments')\r\n      .where('postId', '==', postId)\r\n      .orderBy('date', 'asc')\r\n      .onSnapshot((snapshot) => {\r\n        let comments = [];\r\n        snapshot.forEach((comment) => {\r\n          const { content, postId, userId, date, userName, imageUrl } = comment.data();\r\n          comments.push({\r\n            postId: postId,\r\n            commentId: comment.id,\r\n            content: content,\r\n            date: date.toDate().toDateString() + '  ' + date.toDate().toLocaleTimeString(),\r\n            userId: userId,\r\n            userName: userName,\r\n            imageUrl: imageUrl\r\n          });\r\n        });\r\n        this.setState({\r\n          comments: comments\r\n        });\r\n      });\r\n\r\n    this.unsubscribeSubcomments = db.collection('subcomments')\r\n      .where('postId', '==', postId)\r\n      .orderBy('date', 'asc')\r\n      .onSnapshot((snapshot) => {\r\n        let subcomments = [];\r\n        snapshot.forEach((subcomment) => {\r\n          const { content, postId, commentId, userId, date, userName, imageUrl } = subcomment.data();\r\n          subcomments.push({\r\n            postId: postId,\r\n            commentId: commentId,\r\n            subcommentId: subcomment.id,\r\n            content: content,\r\n            date: date.toDate().toDateString() + '  ' + date.toDate().toLocaleTimeString(),\r\n            userId: userId,\r\n            userName: userName,\r\n            imageUrl: imageUrl\r\n          });\r\n        });\r\n        this.setState({\r\n          subcomments: subcomments,\r\n        });\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribeComments();\r\n    this.unsubscribeSubcomments();\r\n  }\r\n\r\n  render() {\r\n    const { comments, subcomments } = this.state;\r\n    const { classes, user } = this.props;\r\n\r\n    return (\r\n      <Paper className={classes.paper}>\r\n        {comments.map((comment) => {\r\n          return (\r\n            <Comment className={classes.comments} key={comment.commentId} comment={comment} subcomments={subcomments} user={user} />\r\n          )\r\n        })\r\n        }\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nCommentSection.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(CommentSection);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { firebase } from '../../Firebase';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport classnames from 'classnames';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport Comment from '@material-ui/icons/Comment';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport WriteComment from './WriteComment';\r\nimport CommentSection from './CommentSection';\r\n\r\nconst styles = theme => ({\r\n  card: {\r\n    boxShadow: 'none',\r\n    borderBottom: '1px #dbdbdb solid',\r\n    borderRadius: 0\r\n  },\r\n  media: {\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  avatar: {\r\n    margin: 10,\r\n  },\r\n  bigAvatar: {\r\n    width: 50,\r\n    height: 50,\r\n  },\r\n  content: {\r\n    height: 80,\r\n    display: '-webkit-box',\r\n    overflow: 'hidden',\r\n    boxOrient: 'vertical',\r\n    textOverflow: 'ellipsis',\r\n    lineClamp: 4\r\n  },\r\n  actions: {\r\n    display: 'flex',\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n    marginLeft: 'auto',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginRight: -8,\r\n    },\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  favourite: {\r\n    color: '#dc143c'\r\n  },\r\n  unfavourite: {\r\n    color: 'grey'\r\n  }\r\n});\r\n\r\nclass Post extends React.Component {\r\n  isLikeRecieved = false;\r\n  isLikePending = false;\r\n  isLiked = false;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      commentsCounter: 0,\r\n      chat: false,\r\n      likes: 0,\r\n      changeLikeColor: false\r\n    };\r\n    this.handleCommentClick = this.handleCommentClick.bind(this);\r\n    this.addToLiked = this.addToLiked.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const db = firebase.firestore();\r\n\r\n    this.unsubscribeBlog = db.collection('blog').doc(this.props.postId).onSnapshot((post) => {\r\n      if (post.exists) {\r\n        const commentsCounter = post.data().commentsCounter;\r\n        const likes = post.data().likes;\r\n\r\n        this.setState({\r\n          commentsCounter: commentsCounter,\r\n          likes: likes,\r\n        });\r\n      } else {\r\n        console.log(`postId ${this.props.postId} doesn't exists or can't retrieve it`);\r\n      }\r\n    });\r\n\r\n    if (typeof this.props.user === 'object' && this.props.user.hasOwnProperty('userId')) {\r\n      this.unsubscribeUserLiked = db.collection('users').doc(this.props.user.userId)\r\n        .collection('userLiked').where('postId', '==', this.props.postId).onSnapshot((userLike) => {\r\n          if (userLike.docs.length === 1) {\r\n            this.setState(() => {\r\n              this.isLikeRecieved = true;\r\n              this.isLiked = userLike.docs[0].data().isLiked;\r\n\r\n              return {\r\n                changeLikeColor: this.isLiked\r\n              };\r\n            });\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { user } = this.props;\r\n\r\n    if (user !== prevProps.user && user !== undefined && user.hasOwnProperty('userId')) {\r\n      let db = firebase.firestore();\r\n      this.unsubscribeUserLiked = db.collection('users').doc(user.userId)\r\n        .collection('userLiked').where('postId', '==', this.props.postId).onSnapshot((userLike) => {\r\n          if (userLike.docs.length === 1) {\r\n            this.setState(() => {\r\n              this.isLikeRecieved = true;\r\n              this.isLiked = userLike.docs[0].data().isLiked;\r\n\r\n              return {\r\n                changeLikeColor: this.isLiked\r\n              };\r\n            });\r\n          }\r\n        });\r\n    } else if (user !== prevProps.user && user === undefined) {\r\n      this.isLikeRecieved = false;\r\n      this.isLiked = false;\r\n\r\n      this.setState({\r\n        changeLikeColor: false\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribeBlog();\r\n    if (this.unsubscribeUserLiked) {\r\n      this.unsubscribeUserLiked();\r\n    }\r\n  }\r\n\r\n  addToLiked() {\r\n    if (typeof this.props.user !== 'object') {\r\n      return;\r\n    } else if (!this.props.user.hasOwnProperty('userId') && !this.isLikeRecieved) {\r\n      return;\r\n    } else if (this.isLikePending) {\r\n      return;\r\n    }\r\n\r\n    this.isLikePending = !this.isLikePending;\r\n    const vote = this.isLiked ? -1 : 1;\r\n\r\n    this.setState({\r\n      changeLikeColor: !this.state.changeLikeColor,\r\n      likes: this.state.likes + vote\r\n    });\r\n\r\n    const db = firebase.firestore();\r\n    const postRef = firebase.firestore().collection('blog').doc(this.props.postId);\r\n\r\n    db.runTransaction((t) => {\r\n      return t.get(postRef).then((post) => {\r\n        const newLikes = post.data().likes + vote;\r\n        t.update(postRef, { likes: newLikes });\r\n      });\r\n    }).then(() => {\r\n      const userLiked = db.collection('users').doc(this.props.user.userId).collection('userLiked');\r\n      userLiked.where('postId', '==', this.props.postId).get().then((liked) => {\r\n        if (liked.docs.length === 0) {\r\n          userLiked.add({\r\n            postId: this.props.postId,\r\n            isLiked: !this.isLiked\r\n          }).then(() => {\r\n            this.isLikePending = false;\r\n          }).catch(err => {\r\n            console.log(`Adding \"isLiked\" doc failure: `, err);\r\n          });\r\n        } else {\r\n          userLiked.doc(liked.docs[0].id).update({\r\n            isLiked: !this.isLiked\r\n          }).then(() => {\r\n            this.isLikePending = false;\r\n          }).catch(err => {\r\n            console.log(`Updating \"isLiked\" doc failure: `, err);\r\n          });\r\n        }\r\n      });\r\n    }).catch(err => {\r\n      console.log(`Transaction \"${vote} like\" failure: `, err);\r\n    });\r\n  }\r\n\r\n  handleCommentClick() {\r\n    this.setState(state => ({\r\n      chat: !state.chat\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { classes, post, postId, user } = this.props;\r\n    const { commentsCounter, chat, changeLikeColor, likes } = this.state;\r\n\r\n    post.date = new Date(post.date).toDateString();\r\n\r\n    return (\r\n      <Card className={classes.card}>\r\n        <CardHeader\r\n          avatar={\r\n            <Avatar src={post.avatarUrl}\r\n              aria-label=\"Recipe\" className={classnames(classes.avatar, classes.bigAvatar)}>\r\n            </Avatar>\r\n          }\r\n          title={post.title}\r\n          subheader={post.date}\r\n        />\r\n        <a type=\"button\" target=\"_blank\" rel=\"noopener noreferrer\"\r\n          href={post.linkUrl}>\r\n          <CardMedia\r\n            className={classes.media}\r\n            image={post.imageUrl}\r\n            title={post.title}\r\n          />\r\n        </a>\r\n        <CardContent>\r\n          <Typography className={classes.content} component=\"p\">\r\n            {post.content}\r\n          </Typography>\r\n          <Typography component=\"p\" align=\"left\" variant=\"caption\">\r\n            Main page: <a type=\"button\" target=\"_blank\" rel=\"noopener noreferrer\"\r\n              href={post.homepageUrl}>\r\n              {post.homepageUrl}\r\n            </a>\r\n          </Typography>\r\n        </CardContent>\r\n        <CardActions className={classes.actions} disableActionSpacing>\r\n          <IconButton aria-label=\"Add to favorites\" onClick={this.addToLiked}>\r\n            {changeLikeColor ?\r\n              <FavoriteIcon className={classes.favourite} /> : <FavoriteIcon className={classes.unfavourite} />}\r\n            <Typography>{likes}</Typography>\r\n          </IconButton>\r\n          <IconButton\r\n            onClick={this.handleCommentClick}\r\n            aria-expanded={chat}\r\n            aria-label=\"Comment\">\r\n            <Comment />\r\n            <Typography>{commentsCounter}</Typography>\r\n          </IconButton>\r\n        </CardActions>\r\n        <Collapse in={chat} timeout=\"auto\" unmountOnExit>\r\n          <Divider />\r\n          <CardContent>\r\n            <CommentSection postId={postId} user={user} />\r\n            {user ?\r\n              <WriteComment postId={postId} user={user} /> :\r\n              <Typography>Sign in to write a comment.</Typography>\r\n            }\r\n          </CardContent>\r\n        </Collapse>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nPost.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Post);\r\n","// var algoliasearch = require('algoliasearch');\r\n// var algoliasearch = require('algoliasearch/reactnative');\r\n// var algoliasearch = require('algoliasearch/lite');\r\nimport * as algoliasearch from 'algoliasearch'; // When using TypeScript\r\n\r\n// or just use algoliasearch if you are using a <script> tag\r\n// if you are using AMD module loader, algoliasearch will not be defined in window,\r\n// but in the AMD modules of the page\r\n\r\nconst APP_ID = process.env.REACT_APP_ALGOLIA_appId;\r\nconst SEARCH_ONLY_API_KEY = process.env.REACT_APP_ALGOLIA_searchOnlyApiKey;\r\n\r\nconst client = algoliasearch(APP_ID, SEARCH_ONLY_API_KEY);\r\nconst index = client.initIndex('blog_posts');\r\n\r\nfunction Algolia(query) {\r\n\treturn new Promise((resolve) => {\r\n\t\tindex.search(\r\n\t\t\t{\r\n\t\t\t\tquery: query,\r\n\t\t\t\t// attributesToRetrieve: ['firstname', 'lastname'],\r\n\t\t\t\thitsPerPage: 50,\r\n\t\t\t},\r\n\t\t\tfunction searchDone(err, content) {\r\n\t\t\t\tif (err) throw err;\r\n\t\t\t\tresolve(content);\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n}\r\n\r\nexport default Algolia;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport LazyLoad from 'react-lazy-load';\r\n\r\nimport Post from './Post';\r\nimport Algolia from '../../Algolia';\r\nimport { UserContext } from '../../App';\r\nimport makeCancelablePromise from '../helperFunctions/makeCancelablePromise';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1\r\n  },\r\n  grid: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      flexDirection: 'column-reverse'\r\n    }\r\n  },\r\n  searchBar: {\r\n    alignItems: 'baseline',\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit,\r\n  },\r\n  articlesTitle: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      padding: '25px 0px 0px 20px',\r\n      fontSize: 16\r\n    },\r\n    color: 'grey',\r\n  },\r\n  articleContainer: {\r\n    marginLeft: '25%',\r\n    [theme.breakpoints.down('md')]: {\r\n      marginLeft: '15%',\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      marginLeft: '0%',\r\n    },\r\n  },\r\n  posts: {\r\n    marginLeft: '30%',\r\n    [theme.breakpoints.down('md')]: {\r\n      marginLeft: '15%',\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      margin: '5%',\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      margin: '0%',\r\n    }\r\n  },\r\n  avatar: {\r\n    margin: 10\r\n  },\r\n  lazyLoad: {\r\n    display: 'inline-block',\r\n    position: 'relative',\r\n    height: 600,\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: 300,\r\n    }\r\n  },\r\n});\r\n\r\nclass Blog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      posts: [],\r\n    };\r\n    this.handleOnSearchChange = this.handleOnSearchChange.bind(this);\r\n    this.handleOnContentVisible = this.handleOnContentVisible.bind(this);\r\n  }\r\n\r\n  handleOnContentVisible() {\r\n\r\n  }\r\n\r\n  AlgoliaResults = makeCancelablePromise(Algolia(''));\r\n\r\n  handleOnSearchChange(event) {\r\n    const searchValue = event.target.value;\r\n    this.AlgoliaResults = makeCancelablePromise(Algolia(searchValue));\r\n\r\n    this.AlgoliaResults\r\n      .promise\r\n      .then((content) => {\r\n        this.setState({\r\n          posts: content.hits,\r\n        });\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.AlgoliaResults\r\n      .promise\r\n      .then((content) => {\r\n        this.setState({\r\n          posts: content.hits,\r\n        });\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.AlgoliaResults.cancel();\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { posts } = this.state;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <Grid container spacing={0} className={classes.searchBar}>\r\n          <Grid item xs={12} md={2} className={classes.articleContainer}>\r\n            <Typography variant=\"title\" gutterBottom={true} align=\"left\" className={classes.articlesTitle}>\r\n              LATEST ARTICLES\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <TextField\r\n              className={classes.textField}\r\n              onChange={this.handleOnSearchChange}\r\n              id=\"outlined-search\"\r\n              label=\"Search...\"\r\n              type=\"search\"\r\n              margin=\"normal\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n          <Divider />\r\n        </Grid>\r\n        <Grid container spacing={0} className={classes.grid}>\r\n          <Grid item sm={12} md={9}>\r\n            <div className={classes.posts}>\r\n              <Grid container spacing={0}>\r\n                {posts.map((post) => {\r\n                  return (\r\n                    <Grid item xs={12} key={post.objectID}>\r\n                      <LazyLoad className={classes.lazyLoad} offsetVertical={1000} onContentVisible={this.handleOnContentVisible}>\r\n                        <UserContext.Consumer>\r\n                          {user => <Post postId={post.objectID} post={post} user={user} />}\r\n                        </UserContext.Consumer>\r\n                      </LazyLoad>\r\n                    </Grid>\r\n                  )\r\n                })}\r\n              </Grid>\r\n            </div>\r\n          </Grid>\r\n          <Grid item sm={12} md={3}>\r\n            <Grid container spacing={0} className={classes.grid}>\r\n              <Grid item sm={3} md={3}>\r\n\r\n              </Grid>\r\n              <Grid item sm={3} md={3}>\r\n\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nBlog.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Blog);\r\n","import React, { Component } from 'react';\r\nimport { Route, BrowserRouter as Router, Switch } from \"react-router-dom\";\r\nimport PropTypes from 'prop-types';\r\nimport { GoogleLogin, GoogleLogout } from 'react-google-login';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport grey from '@material-ui/core/colors/grey';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nimport TopNavBar from './components/navbar/TopNavBar';\r\nimport NavBar from './components/navbar/NavBar';\r\nimport DrawerMenu from './components/navbar/DrawerMenu';\r\n\r\nimport Main from './components/main/Main';\r\nimport About from './components/about/About';\r\nimport Gallery from './components/gallery/Gallery';\r\nimport Category from './components/gallery/Category';\r\nimport Blog from './components/blog/Blog';\r\n// import Footer from './components/footer/Footer'\r\n\r\nimport { setUser } from './components/blog/uploadSource';\r\n\r\nexport const UserContext = React.createContext();\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: grey,\r\n  },\r\n});\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'inline-flex',\r\n      width: 30,\r\n      height: 30,\r\n    },\r\n  },\r\n  GoogleLogin: {\r\n    position: 'absolute',\r\n    marginLeft: '81%',\r\n    border: 'white',\r\n    backgroundColor: 'white',\r\n    color: 'grey',\r\n    height: 32,\r\n    width: 60,\r\n    borderRadius: 10,\r\n    fontSize: 12,\r\n    fontWeight: 'bold',\r\n    '&:hover': {\r\n      border: '1px #dbdbdb solid'\r\n    },\r\n  },\r\n  GoogleLogout: {\r\n    position: 'absolute',\r\n    marginLeft: '81%',\r\n    fontSize: 16,\r\n  },\r\n});\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: undefined,\r\n    }\r\n    this.responseGoogle = this.responseGoogle.bind(this);\r\n    this.logout = this.logout.bind(this);\r\n  }\r\n\r\n  responseGoogle = (res) => {\r\n    setUser(res.profileObj).then((user) => {\r\n      this.setState({\r\n        user: user,\r\n      });\r\n    });\r\n  }\r\n\r\n  logout = () => {\r\n    this.setState({\r\n      user: undefined\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { user } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <MuiThemeProvider theme={theme}>\r\n        <Router>\r\n          <UserContext.Provider value={user}>\r\n            <Grid container spacing={0} className={classes.root}>\r\n              <Grid item xs={10} sm={12}>\r\n                <TopNavBar>\r\n                  {user ?\r\n                    <GoogleLogout\r\n                      className={classes.GoogleLogout}\r\n                      tag={'div'}\r\n                      buttonText=\"\"\r\n                      onLogoutSuccess={this.logout}\r\n                    >\r\n                      <Avatar className={classes.avatar} alt={user.userName} src={user.imageUrl} />\r\n                    </GoogleLogout> :\r\n                    <GoogleLogin\r\n                      className={classes.GoogleLogin}\r\n                      clientId={process.env.REACT_APP_GOOGLE_clientId}\r\n                      tag={'button'}\r\n                      uxMode={'popup'}\r\n                      buttonText=\"Google login\"\r\n                      onSuccess={this.responseGoogle}\r\n                      onFailure={this.responseGoogle}\r\n                      isSignedIn={true}\r\n                    >\r\n                    </GoogleLogin>\r\n                  }\r\n                </TopNavBar>\r\n              </Grid>\r\n              <Grid item xs={2} sm={12}>\r\n                <Hidden only={['xs']}>\r\n                  <NavBar />\r\n                </Hidden>\r\n                <Hidden only={['sm', 'md', 'lg', 'xl']}>\r\n                  <DrawerMenu />\r\n                </Hidden>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Switch>\r\n                  <Route exact path=\"/\" component={Main} />\r\n                  <Route path=\"/main\" component={Main} />\r\n                  <Route path=\"/about\" component={About} />\r\n                  <Route path=\"/gallery/\" component={Gallery} />\r\n                  <Route path=\"/category/:category\" component={Category} />\r\n                  <Route path=\"/blog\" component={Blog} />\r\n                  <Route render={() => <div>Not Found</div>} />\r\n                </Switch>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                {/* ToDo <Route path=\"/footer\" component={Footer}/> */}\r\n              </Grid>\r\n            </Grid>\r\n          </UserContext.Provider>\r\n        </Router>\r\n      </MuiThemeProvider >\r\n    );\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(App);\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\n\r\nimport './index.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}